


<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>How to Develop a Flow with Conditional Branches &#8212; PyAgentSpec 26.1.0.dev0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dba54f56160742ef5599" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dba54f56160742ef5599" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css-style.css" />
    <link rel="stylesheet" type="text/css" href="../_static/core.css" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=dba54f56160742ef5599"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dba54f56160742ef5599" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dba54f56160742ef5599" />

  
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/fix-navigation.js"></script>
    <script src="../_static/js/fix-navigation.js"></script>
    <script src="../_static/tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'howtoguides/howto_flow_with_conditional_branches';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://oracle.github.io/agent-spec/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '26.1.0.dev0';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
  <script src="../_static/announcement.js"></script>

    <link rel="icon" href="../_static/favicon.svg"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How to Develop an Agent with Remote Tools" href="howto_agent_with_remote_tools.html" />
    <link rel="prev" title="How to Implement a Plugin for MCP" href="howto_mcp.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="26.1" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/agentspec-dark.svg" class="logo__image only-light" alt="PyAgentSpec 26.1.0.dev0 documentation - Home"/>
    <img src="../_static/agentspec-white.svg" class="logo__image only-dark pst-js-only" alt="PyAgentSpec 26.1.0.dev0 documentation - Home"/>
  
  
</a></div>
    
      <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="../docs_home.html">Open Agent Spec</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="../agentspec/index.html">Specification</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="../api/index.html">API Reference</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="../changelog.html">Release Notes</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="../misc/reference_sheet.html">Reference Sheet</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="../contributing.html">Contributing</a>
    </li>
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/oracle/agent-spec" title="WayFlow GitHub repository" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../_static/icons/github-icon.svg" class="icon-link-image" alt="WayFlow GitHub repository"/></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="../docs_home.html">Open Agent Spec</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="../agentspec/index.html">Specification</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="../api/index.html">API Reference</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="../changelog.html">Release Notes</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="../misc/reference_sheet.html">Reference Sheet</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="../contributing.html">Contributing</a>
    </li>
  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/oracle/agent-spec" title="WayFlow GitHub repository" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../_static/icons/github-icon.svg" class="icon-link-image" alt="WayFlow GitHub repository"/></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Agent Spec</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../agentspec/index.html">Agent Spec Specification</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../agentspec/intro_and_motivation.html">Introduction, motivation &amp; vision</a></li>
<li class="toctree-l2"><a class="reference internal" href="../agentspec/language_spec_25_4_1.html">Language specification (v25.4.1)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../agentspec/positioning.html">Positioning in the agentic ecosystem</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Essentials</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">How-to guides</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="howto_agents.html">How to build a simple ReAct Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_mcp.html">How to connect MCP tools to assistants</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">How to Develop a Flow with Conditional Branches</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_agent_with_remote_tools.html">How to Develop an Agent with Remote Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_mapnode.html">Do Map and Reduce Operations in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_orchestrator_agent.html">How to Build an Orchestrator-Workers Agents Pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_generation_config.html">Specify the Generation Configuration when Using LLMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_llm_from_different_providers.html">Use LLM from Different LLM Sources and Providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_ociagent.html">Use OCI Generative AI Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_a2aagent.html">Build an A2A Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_swarm.html">Build a Swarm of Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_managerworkers.html">Build a Manager-Worker Multi-Agent System</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_structured_generation.html">Build Flows with Structured LLM Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_parallelflownode.html">Run Multiple Flows in Parallel</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_execute_agentspec_with_wayflow.html">How to Execute Agent Spec Configuration with WayFlow</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_execute_agentspec_across_frameworks.html">How to Execute Agent Spec Across Frameworks</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_plugin.html">How to use custom components with the Plugin System</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api/index.html">API Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/components.html">Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/agent.html">Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/remoteagent.html">Remote Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/flows.html">Flows &amp; Nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/llmmodels.html">LLMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/tools.html">Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/ioproperties.html">IO Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/mcp.html">MCP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/serialization.html">Serialization / Deserialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/agenticpatterns.html">Agentic Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/agent_specialization.html">Agent Specialization</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../misc/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/reference_sheet.html">Reference Sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security Considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faqs.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Release Notes</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../docs_home.html" class="nav-link">Open Agent Specification (Agent Spec)</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">How-to Guides</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">How to Develop a Flow with Conditional Branches</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="how-to-develop-a-flow-with-conditional-branches">
<h1>How to Develop a Flow with Conditional Branches<a class="headerlink" href="#how-to-develop-a-flow-with-conditional-branches" title="Permalink to this heading">#</a></h1>
<p>This guide demonstrates how to:</p>
<ol class="arabic simple">
<li><p>Define properties to document the input and output types of nodes in a flow</p></li>
<li><p>Configure an LLM model</p></li>
<li><p>Define different types of nodes for a flow</p></li>
<li><p>Define edges for controlling the flow (including branching and loops) and passing data between nodes</p></li>
<li><p>Define a flow and export its Agent Spec configuration</p></li>
</ol>
<p>The example illustrates an assistant which generates code, reviews the generated code, and either submits or regenerates it based on the review.
This flow pattern can be applied to other use cases.</p>
<section id="basic-implementation">
<h2>Basic implementation<a class="headerlink" href="#basic-implementation" title="Permalink to this heading">#</a></h2>
<section id="define-properties">
<h3>1. Define properties<a class="headerlink" href="#define-properties" title="Permalink to this heading">#</a></h3>
<p>Properties are used to annotate node configurations with the expected input and output types.
This helps enforce data consistency throughout the flow.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">Property</span>

<span class="n">user_request_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
    <span class="n">json_schema</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;user_request&quot;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">code_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
    <span class="n">json_schema</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">review_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
    <span class="n">json_schema</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;review&quot;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">is_code_ready_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
    <span class="n">json_schema</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;is_code_ready&quot;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>API Reference: <a class="reference internal" href="../api/ioproperties.html#property"><span class="std std-ref">Property</span></a></p>
</section>
<section id="define-the-llm-model">
<h3>2. Define the LLM model<a class="headerlink" href="#define-the-llm-model" title="Permalink to this heading">#</a></h3>
<p>Flows typically contain nodes that rely on messages generated by a Large Language Model (LLM).
To define these nodes, you must provide the LLM configuration.
Several backend options are supported, including the <a class="reference external" href="https://www.oracle.com/artificial-intelligence/generative-ai/generative-ai-service/">OCI Generative AI service</a> or a self-hosted model using vLLM.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">OCI GenAI</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">vLLM</button><button aria-controls="panel-0-0-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-2" name="0-2" role="tab" tabindex="-1">Ollama</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.llms</span><span class="w"> </span><span class="kn">import</span> <span class="n">OciGenAiConfig</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.llms.ociclientconfig</span><span class="w"> </span><span class="kn">import</span> <span class="n">OciClientConfigWithApiKey</span>

<span class="n">client_config</span> <span class="o">=</span> <span class="n">OciClientConfigWithApiKey</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Oci Client Config&quot;</span><span class="p">,</span>
    <span class="n">service_endpoint</span><span class="o">=</span><span class="s2">&quot;https://url-to-service-endpoint.com&quot;</span><span class="p">,</span>
    <span class="n">auth_profile</span><span class="o">=</span><span class="s2">&quot;DEFAULT&quot;</span><span class="p">,</span>
    <span class="n">auth_file_location</span><span class="o">=</span><span class="s2">&quot;~/.oci/config&quot;</span>
<span class="p">)</span>

<span class="n">llm_config</span> <span class="o">=</span> <span class="n">OciGenAiConfig</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Oci GenAI Config&quot;</span><span class="p">,</span>
    <span class="n">model_id</span><span class="o">=</span><span class="s2">&quot;provider.model-id&quot;</span><span class="p">,</span>
    <span class="n">compartment_id</span><span class="o">=</span><span class="s2">&quot;compartment-id&quot;</span><span class="p">,</span>
    <span class="n">client_config</span><span class="o">=</span><span class="n">client_config</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.llms</span><span class="w"> </span><span class="kn">import</span> <span class="n">VllmConfig</span>

<span class="n">llm_config</span> <span class="o">=</span> <span class="n">VllmConfig</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Llama 3.1 8B instruct&quot;</span><span class="p">,</span>
    <span class="n">url</span><span class="o">=</span><span class="s2">&quot;VLLM_URL&quot;</span><span class="p">,</span>
    <span class="n">model_id</span><span class="o">=</span><span class="s2">&quot;model-id&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-2" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-2" name="0-2" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.llms</span><span class="w"> </span><span class="kn">import</span> <span class="n">OllamaConfig</span>

<span class="n">llm_config</span> <span class="o">=</span> <span class="n">OllamaConfig</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Ollama Config&quot;</span><span class="p">,</span>
    <span class="n">model_id</span><span class="o">=</span><span class="s2">&quot;model-id&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div></div>
<p>API Reference: <a class="reference internal" href="../api/llmmodels.html#vllmconfig"><span class="std std-ref">VllmConfig</span></a></p>
</section>
<section id="define-nodes">
<h3>3. Define nodes<a class="headerlink" href="#define-nodes" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">StartNode</span></code> specifies the expected input values, while the <code class="docutils literal notranslate"><span class="pre">EndNode</span></code> defines the outputs returned upon successful execution of the flow.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.nodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">EndNode</span><span class="p">,</span> <span class="n">StartNode</span>

<span class="n">start_node</span> <span class="o">=</span> <span class="n">StartNode</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Start node&quot;</span><span class="p">,</span>
    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">user_request_property</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">end_node</span> <span class="o">=</span> <span class="n">EndNode</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;End node&quot;</span><span class="p">,</span>
    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">code_property</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
<p>API Reference: <a class="reference internal" href="../api/flows.html#startnode"><span class="std std-ref">StartNode</span></a> and <a class="reference internal" href="../api/flows.html#endnode"><span class="std std-ref">EndNode</span></a></p>
<p>Nodes of type <code class="docutils literal notranslate"><span class="pre">LlmNode</span></code> are configured with a prompt and an <code class="docutils literal notranslate"><span class="pre">LlmConfig</span></code> to generate a new message from a language model.
This message is based on the prompt.
The generated message can be, for example, code or a review of previously generated code, as shown in the examples below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.nodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">LlmNode</span>

<span class="n">generate_code_node</span> <span class="o">=</span> <span class="n">LlmNode</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Generate code node&quot;</span><span class="p">,</span>
    <span class="n">prompt_template</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;You are a great code python software engineer.</span>

<span class="s2">    Please write the python code to satisfy the following user request: &quot;{{user_request}}&quot;.</span>

<span class="s2">    You previously generated the following snippet of code:</span>
<span class="s2">    ```</span>
<span class="s2">    {{code}}</span>
<span class="s2">    ```</span>
<span class="s2">    Take inspiration from the snippet of code.</span>

<span class="s2">    The code reviewer gave the following feedback:</span>
<span class="s2">    {{review}}</span>
<span class="s2">    Take also into account the comments in the review</span>

<span class="s2">    Write only the python code.</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">llm_config</span><span class="o">=</span><span class="n">llm_config</span><span class="p">,</span>
    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">user_request_property</span><span class="p">,</span> <span class="n">code_property</span><span class="p">,</span> <span class="n">review_property</span><span class="p">],</span>
    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">code_property</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">review_code_node</span> <span class="o">=</span> <span class="n">LlmNode</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Review code node&quot;</span><span class="p">,</span>
    <span class="n">prompt_template</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;You are a great code python software engineer, and a highly skilled code reviewer.</span>
<span class="s2">    Please review the following snippet of python code:</span>
<span class="s2">    ```</span>
<span class="s2">    {{code}}</span>
<span class="s2">    ```</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">llm_config</span><span class="o">=</span><span class="n">llm_config</span><span class="p">,</span>
    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">code_property</span><span class="p">],</span>
    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">review_property</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
<p>API Reference: <a class="reference internal" href="../api/flows.html#llmnode"><span class="std std-ref">LlmNode</span></a></p>
<p>A <code class="docutils literal notranslate"><span class="pre">BranchingNode</span></code> can take different paths through the execution of a flow.
In the example below, it is used in conjunction with an <code class="docutils literal notranslate"><span class="pre">LlmNode</span></code> that evaluates whether the generated code should be accepted or regenerated.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.nodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">BranchingNode</span><span class="p">,</span> <span class="n">LlmNode</span>

<span class="n">is_code_ready_decision_node</span> <span class="o">=</span> <span class="n">LlmNode</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Check if code is ready node&quot;</span><span class="p">,</span>
    <span class="n">prompt_template</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;You are a software engineer with 20 years of experience. You have to take a decision.</span>
<span class="s2">    Based on the following code review, do you think that the code is ready to be deployed?</span>
<span class="s2">    ```</span>
<span class="s2">    {{review}}</span>
<span class="s2">    ```</span>
<span class="s2">    Please answer only with `yes` or `no`.</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">llm_config</span><span class="o">=</span><span class="n">llm_config</span><span class="p">,</span>
    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">review_property</span><span class="p">],</span>
    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">is_code_ready_property</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">is_code_ready_branching_node</span> <span class="o">=</span> <span class="n">BranchingNode</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Is code ready branching node&quot;</span><span class="p">,</span>
    <span class="n">mapping</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;yes&quot;</span><span class="p">:</span> <span class="s2">&quot;yes&quot;</span><span class="p">,</span>
        <span class="s2">&quot;no&quot;</span><span class="p">:</span> <span class="s2">&quot;no&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">is_code_ready_property</span><span class="p">],</span>
    <span class="n">outputs</span><span class="o">=</span><span class="p">[],</span>
<span class="p">)</span>
</pre></div>
</div>
<p>API Reference: <a class="reference internal" href="../api/flows.html#startnode"><span class="std std-ref">StartNode</span></a> and <a class="reference internal" href="../api/flows.html#endnode"><span class="std std-ref">EndNode</span></a></p>
</section>
<section id="define-the-control-and-data-flow-edges">
<h3>4. Define the control and data flow edges<a class="headerlink" href="#define-the-control-and-data-flow-edges" title="Permalink to this heading">#</a></h3>
<p>There are two types of edges in a flow:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ControlFlowEdges</span></code> control the sequence of nodes that gets executed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFlowEdges</span></code> define how data is passed from one node to another.</p></li>
</ul>
<p>This manner of defining control and data flow edges allows for advanced behaviors such as conditional branching and looping, as illustrated in the example below.</p>
<p>In the control edges defined below, notice that two edges are connected to the <code class="docutils literal notranslate"><span class="pre">BranchingNode</span></code> (<code class="docutils literal notranslate"><span class="pre">is_code_ready_branching_to_end_control_edge</span></code>) due to the two possible branches of the node.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.edges.controlflowedge</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlFlowEdge</span>

<span class="n">control_flow_edges</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">ControlFlowEdge</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;start_to_generate_code_control_edge&quot;</span><span class="p">,</span>
        <span class="n">from_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
        <span class="n">to_node</span><span class="o">=</span><span class="n">generate_code_node</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">ControlFlowEdge</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;generate_code_to_review_control_edge&quot;</span><span class="p">,</span>
        <span class="n">from_node</span><span class="o">=</span><span class="n">generate_code_node</span><span class="p">,</span>
        <span class="n">to_node</span><span class="o">=</span><span class="n">review_code_node</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">ControlFlowEdge</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;review_to_is_code_ready_decision_control_edge&quot;</span><span class="p">,</span>
        <span class="n">from_node</span><span class="o">=</span><span class="n">review_code_node</span><span class="p">,</span>
        <span class="n">to_node</span><span class="o">=</span><span class="n">is_code_ready_decision_node</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">ControlFlowEdge</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;is_code_ready_decision_to_is_code_ready_branching_control_edge&quot;</span><span class="p">,</span>
        <span class="n">from_node</span><span class="o">=</span><span class="n">is_code_ready_decision_node</span><span class="p">,</span>
        <span class="n">to_node</span><span class="o">=</span><span class="n">is_code_ready_branching_node</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">ControlFlowEdge</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;is_code_ready_branching_to_end_control_edge&quot;</span><span class="p">,</span>
        <span class="n">from_node</span><span class="o">=</span><span class="n">is_code_ready_branching_node</span><span class="p">,</span>
        <span class="n">from_branch</span><span class="o">=</span><span class="s2">&quot;yes&quot;</span><span class="p">,</span>
        <span class="n">to_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">ControlFlowEdge</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;is_code_ready_branching_to_generate_code_control_edge&quot;</span><span class="p">,</span>
        <span class="n">from_node</span><span class="o">=</span><span class="n">is_code_ready_branching_node</span><span class="p">,</span>
        <span class="n">from_branch</span><span class="o">=</span><span class="s2">&quot;no&quot;</span><span class="p">,</span>
        <span class="n">to_node</span><span class="o">=</span><span class="n">generate_code_node</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">]</span>

</pre></div>
</div>
<p>API Reference: <a class="reference internal" href="../api/flows.html#controlflowedge"><span class="std std-ref">ControlFlowEdge</span></a></p>
<p>In the data edges below, note that the <code class="docutils literal notranslate"><span class="pre">code</span></code> output from the <code class="docutils literal notranslate"><span class="pre">generate_code_node</span></code> is passed to three different nodes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">end_node</span></code> - because the generated code is the final output of the flow.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">generate_code_node</span></code> itself - to include previously generated code in the prompt and improve the next version.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">review_code_node</span></code> - because the generated code is used to generate a code review.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.edges.dataflowedge</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataFlowEdge</span>

<span class="n">data_flow_edges</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">DataFlowEdge</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;start_to_generate_code_user_request_data_edge&quot;</span><span class="p">,</span>
        <span class="n">source_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
        <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;user_request&quot;</span><span class="p">,</span>
        <span class="n">destination_node</span><span class="o">=</span><span class="n">generate_code_node</span><span class="p">,</span>
        <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;user_request&quot;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">DataFlowEdge</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;generate_code_to_end_code_data_edge&quot;</span><span class="p">,</span>
        <span class="n">source_node</span><span class="o">=</span><span class="n">generate_code_node</span><span class="p">,</span>
        <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
        <span class="n">destination_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">,</span>
        <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">DataFlowEdge</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;generate_code_to_generate_code_code_data_edge&quot;</span><span class="p">,</span>
        <span class="n">source_node</span><span class="o">=</span><span class="n">generate_code_node</span><span class="p">,</span>
        <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
        <span class="n">destination_node</span><span class="o">=</span><span class="n">generate_code_node</span><span class="p">,</span>
        <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">DataFlowEdge</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;generate_code_to_review_code_data_edge&quot;</span><span class="p">,</span>
        <span class="n">source_node</span><span class="o">=</span><span class="n">generate_code_node</span><span class="p">,</span>
        <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
        <span class="n">destination_node</span><span class="o">=</span><span class="n">review_code_node</span><span class="p">,</span>
        <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">DataFlowEdge</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;review_code_to_generate_code_review_data_edge&quot;</span><span class="p">,</span>
        <span class="n">source_node</span><span class="o">=</span><span class="n">review_code_node</span><span class="p">,</span>
        <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;review&quot;</span><span class="p">,</span>
        <span class="n">destination_node</span><span class="o">=</span><span class="n">generate_code_node</span><span class="p">,</span>
        <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;review&quot;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">DataFlowEdge</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;review_code_to_is_code_ready_review_data_edge&quot;</span><span class="p">,</span>
        <span class="n">source_node</span><span class="o">=</span><span class="n">review_code_node</span><span class="p">,</span>
        <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;review&quot;</span><span class="p">,</span>
        <span class="n">destination_node</span><span class="o">=</span><span class="n">is_code_ready_decision_node</span><span class="p">,</span>
        <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;review&quot;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">DataFlowEdge</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;review_code_to_is_code_ready_flag_data_edge&quot;</span><span class="p">,</span>
        <span class="n">source_node</span><span class="o">=</span><span class="n">is_code_ready_decision_node</span><span class="p">,</span>
        <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;is_code_ready&quot;</span><span class="p">,</span>
        <span class="n">destination_node</span><span class="o">=</span><span class="n">is_code_ready_branching_node</span><span class="p">,</span>
        <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;is_code_ready&quot;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">]</span>

</pre></div>
</div>
<p>API Reference: <a class="reference internal" href="../api/flows.html#dataflowedge"><span class="std std-ref">DataFlowEdge</span></a></p>
</section>
<section id="define-and-export-the-flow">
<h3>5. Define and export the Flow<a class="headerlink" href="#define-and-export-the-flow" title="Permalink to this heading">#</a></h3>
<p>With all nodes and edges defined, you can now assemble them into a complete flow.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>

<span class="n">final_assistant_flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Generate code and review flow&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Flow that given a user request, generates a python code snippet to satisfy it and passes it through a code review before returning it&quot;</span><span class="p">,</span>
    <span class="n">start_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
    <span class="n">nodes</span><span class="o">=</span><span class="p">[</span>
        <span class="n">start_node</span><span class="p">,</span>
        <span class="n">generate_code_node</span><span class="p">,</span>
        <span class="n">review_code_node</span><span class="p">,</span>
        <span class="n">is_code_ready_decision_node</span><span class="p">,</span>
        <span class="n">is_code_ready_branching_node</span><span class="p">,</span>
        <span class="n">end_node</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">control_flow_connections</span><span class="o">=</span><span class="n">control_flow_edges</span><span class="p">,</span>
    <span class="n">data_flow_connections</span><span class="o">=</span><span class="n">data_flow_edges</span><span class="p">,</span>
<span class="p">)</span>

</pre></div>
</div>
<p>The Agent Spec configuration is generated in JSON format.
It can be loaded into any Agent Spec-compatible system, such as the <a class="reference external" href="https://github.com/oracle/wayflow">WayFlow</a> runtime.
See, for example, <a class="reference internal" href="howto_execute_agentspec_with_wayflow.html"><span class="doc">How to Execute Agent Spec Configuration with WayFlow</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.serialization</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentSpecSerializer</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">serialized_agent</span> <span class="o">=</span> <span class="n">AgentSpecSerializer</span><span class="p">()</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">final_assistant_flow</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">serialized_agent</span><span class="p">)</span>

</pre></div>
</div>
<p>API Reference: <a class="reference internal" href="../api/serialization.html#serialize"><span class="std std-ref">AgentSpecSerializer</span></a></p>
<p>Here is what the <strong>Agent Spec representation will look like </strong></p>
<details class="summary-click-here-to-see-the-assistant-configuration">
<summary>Click here to see the assistant configuration.</summary><div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-1-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-1-1-0" name="1-0" role="tab" tabindex="0">JSON</button><button aria-controls="panel-1-1-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-1" name="1-1" role="tab" tabindex="-1">YAML</button></div><div aria-labelledby="tab-1-1-0" class="sphinx-tabs-panel" id="panel-1-1-0" name="1-0" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Flow&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0facfa1b-11ac-4fcd-b95b-61955a94353e&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Generate code and review flow&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Flow that given a user request, generates a python code snippet to satisfy it and passes it through a code review before returning it&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">  </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_request&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;start_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;df5db1b8-528f-4fc9-918f-889677bf154b&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;df5db1b8-528f-4fc9-918f-889677bf154b&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a97259f8-8be3-42ac-9909-e21cdd07e9a5&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;52049362-86df-400d-ab95-112ce0d045dc&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;e7c5ca9a-a008-43c0-93f2-efc337a01d90&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;075642ba-b177-428d-939f-3b1e16def02c&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3fb86623-80d5-40aa-9362-88b778c61e9b&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;control_flow_connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;e98a0f0f-6372-4f4b-8c5c-1e61c5fdb677&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;start_to_generate_code_control_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;df5db1b8-528f-4fc9-918f-889677bf154b&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a97259f8-8be3-42ac-9909-e21cdd07e9a5&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;22705617-f433-4f66-bb75-8ff1e35fed1c&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;generate_code_to_review_control_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a97259f8-8be3-42ac-9909-e21cdd07e9a5&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;52049362-86df-400d-ab95-112ce0d045dc&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;c65c4d53-42cd-43fb-9faf-1138a23f49dc&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;review_to_is_code_ready_decision_control_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;52049362-86df-400d-ab95-112ce0d045dc&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;e7c5ca9a-a008-43c0-93f2-efc337a01d90&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;770ee2ef-9ec4-42e3-b323-767219d3ebe2&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;is_code_ready_decision_to_is_code_ready_branching_control_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;e7c5ca9a-a008-43c0-93f2-efc337a01d90&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;075642ba-b177-428d-939f-3b1e16def02c&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;9763ebfe-e4ce-41e1-98fe-e1c34ca60705&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;is_code_ready_branching_to_end_control_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;075642ba-b177-428d-939f-3b1e16def02c&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;yes&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3fb86623-80d5-40aa-9362-88b778c61e9b&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;f5186c2a-f5df-4a41-a116-a6a1aa869d68&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;is_code_ready_branching_to_generate_code_control_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;075642ba-b177-428d-939f-3b1e16def02c&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;no&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a97259f8-8be3-42ac-9909-e21cdd07e9a5&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;data_flow_connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1ba462c6-905f-4f1b-b26c-c8d5cb95df06&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;start_to_generate_code_user_request_data_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;df5db1b8-528f-4fc9-918f-889677bf154b&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_request&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a97259f8-8be3-42ac-9909-e21cdd07e9a5&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_request&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4f2924f2-fb71-4a11-abad-204a7cdcaeca&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;generate_code_to_end_code_data_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a97259f8-8be3-42ac-9909-e21cdd07e9a5&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3fb86623-80d5-40aa-9362-88b778c61e9b&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;code&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;8c2d7b8f-2bdd-4119-a047-2f692d54c4ec&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;generate_code_to_generate_code_code_data_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a97259f8-8be3-42ac-9909-e21cdd07e9a5&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a97259f8-8be3-42ac-9909-e21cdd07e9a5&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;code&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;e299c1e1-570f-4b8a-aa75-0a4b2af3bb22&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;generate_code_to_review_code_data_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a97259f8-8be3-42ac-9909-e21cdd07e9a5&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;52049362-86df-400d-ab95-112ce0d045dc&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;code&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6ab1d280-197b-4f9f-85d6-b12512e63b6c&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;review_code_to_generate_code_review_data_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;52049362-86df-400d-ab95-112ce0d045dc&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;review&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a97259f8-8be3-42ac-9909-e21cdd07e9a5&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;review&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;e01a059a-3745-46f6-a249-b080bca5466d&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;review_code_to_is_code_ready_review_data_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;52049362-86df-400d-ab95-112ce0d045dc&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;review&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;e7c5ca9a-a008-43c0-93f2-efc337a01d90&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;review&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;9e499cf0-cf9f-44c8-8ad8-02ce8bb75832&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;review_code_to_is_code_ready_flag_data_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;e7c5ca9a-a008-43c0-93f2-efc337a01d90&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;is_code_ready&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;075642ba-b177-428d-939f-3b1e16def02c&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;is_code_ready&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;$referenced_components&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;a97259f8-8be3-42ac-9909-e21cdd07e9a5&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LlmNode&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a97259f8-8be3-42ac-9909-e21cdd07e9a5&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Generate code node&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_request&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;review&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;next&quot;</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;llm_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4401c9a2-d5d3-409e-a2c1-e7f8a83c4570&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;prompt_template&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;You are a great code python software engineer.\n\n    Please write the python code to satisfy the following user request: \&quot;{{user_request}}\&quot;.\n\n    You previously generated the following snippet of code:\n    ```\n    {{code}}\n    ```\n    Take inspiration from the snippet of code.\n\n    The code reviewer gave the following feedback:\n    {{review}}\n    Take also into account the comments in the review\n\n    Write only the python code.\n    &quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;4401c9a2-d5d3-409e-a2c1-e7f8a83c4570&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;VllmConfig&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4401c9a2-d5d3-409e-a2c1-e7f8a83c4570&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Vllm model&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;default_generation_parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vllm_url&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;model_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;model_id&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;df5db1b8-528f-4fc9-918f-889677bf154b&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;StartNode&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;df5db1b8-528f-4fc9-918f-889677bf154b&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Start node&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_request&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_request&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;next&quot;</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;52049362-86df-400d-ab95-112ce0d045dc&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LlmNode&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;52049362-86df-400d-ab95-112ce0d045dc&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Review code node&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;review&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;next&quot;</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;llm_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4401c9a2-d5d3-409e-a2c1-e7f8a83c4570&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;prompt_template&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;You are a great code python software engineer, and a highly skilled code reviewer.\n    Please review the following snippet of python code:\n    ```\n    {{code}}\n    ```\n    &quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;e7c5ca9a-a008-43c0-93f2-efc337a01d90&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LlmNode&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;e7c5ca9a-a008-43c0-93f2-efc337a01d90&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Check if code is ready node&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;review&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;is_code_ready&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;next&quot;</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;llm_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4401c9a2-d5d3-409e-a2c1-e7f8a83c4570&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;prompt_template&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;You are a software engineer with 20 years of experience. You have to take a decision.\n    Based on the following code review, do you think that the code is ready to be deployed?\n    ```\n    {{review}}\n    ```\n    Please answer only with `yes` or `no`.\n    &quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;075642ba-b177-428d-939f-3b1e16def02c&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;BranchingNode&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;075642ba-b177-428d-939f-3b1e16def02c&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Is code ready branching node&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;is_code_ready&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">      </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;default&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;no&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;yes&quot;</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;yes&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;yes&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;no&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;no&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;3fb86623-80d5-40aa-9362-88b778c61e9b&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EndNode&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3fb86623-80d5-40aa-9362-88b778c61e9b&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;End node&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">      </span><span class="nt">&quot;branch_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;next&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;agentspec_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;25.4.1&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-1-1" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-1" name="1-1" role="tabpanel" tabindex="0"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Flow</span>
<span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">c00190a0-6fc4-4f28-9577-1bf9493304c6</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generate code and review flow</span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Flow that given a user request, generates a python code snippet to satisfy</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">it and passes it through a code review before returning it</span>
<span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="nt">inputs</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_request</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="nt">outputs</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">code</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">  </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="nt">start_node</span><span class="p">:</span>
<span class="w">  </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">e486b685-8af7-40d0-87c9-3d8a8f8ac9ca</span>
<span class="nt">nodes</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">e486b685-8af7-40d0-87c9-3d8a8f8ac9ca</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fe833040-7c2b-4ccb-948b-438231a81e6c</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">05e0070f-20d6-4087-842f-0bc0797e07a7</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">942a3daf-c3d2-40a1-b986-0a50e0027d74</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">d2771d05-cea1-4d91-a7ee-e1789db6598e</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">e44296e1-cd8e-41f1-a75e-d1e2dc34bf17</span>
<span class="nt">control_flow_connections</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">07a6797d-c175-4242-890a-eca87087e6aa</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">start_to_generate_code_control_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">e486b685-8af7-40d0-87c9-3d8a8f8ac9ca</span>
<span class="w">  </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fe833040-7c2b-4ccb-948b-438231a81e6c</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">57f5a41d-ad00-4b99-89f7-d2e6905b9aa1</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">generate_code_to_review_control_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fe833040-7c2b-4ccb-948b-438231a81e6c</span>
<span class="w">  </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">05e0070f-20d6-4087-842f-0bc0797e07a7</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">777ee015-8902-49f9-ae85-50f40c1efe14</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">review_to_is_code_ready_decision_control_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">05e0070f-20d6-4087-842f-0bc0797e07a7</span>
<span class="w">  </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">942a3daf-c3d2-40a1-b986-0a50e0027d74</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2f6792cb-2dbe-4301-8291-adf4184345fc</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">is_code_ready_decision_to_is_code_ready_branching_control_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">942a3daf-c3d2-40a1-b986-0a50e0027d74</span>
<span class="w">  </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">d2771d05-cea1-4d91-a7ee-e1789db6598e</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1aeb743f-646d-4c03-9ebb-6594ce5c1022</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">is_code_ready_branching_to_end_control_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">d2771d05-cea1-4d91-a7ee-e1789db6598e</span>
<span class="w">  </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;yes&#39;</span>
<span class="w">  </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">e44296e1-cd8e-41f1-a75e-d1e2dc34bf17</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fdcc989d-6d81-4299-8e71-60d57469f24f</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">is_code_ready_branching_to_generate_code_control_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">d2771d05-cea1-4d91-a7ee-e1789db6598e</span>
<span class="w">  </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;no&#39;</span>
<span class="w">  </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fe833040-7c2b-4ccb-948b-438231a81e6c</span>
<span class="nt">data_flow_connections</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">c99890dc-a45c-4dfb-99f2-95eb064f7cc9</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">start_to_generate_code_user_request_data_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">e486b685-8af7-40d0-87c9-3d8a8f8ac9ca</span>
<span class="w">  </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_request</span>
<span class="w">  </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fe833040-7c2b-4ccb-948b-438231a81e6c</span>
<span class="w">  </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_request</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fd313b9f-4c2e-4f5b-b56e-485392201054</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">generate_code_to_end_code_data_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fe833040-7c2b-4ccb-948b-438231a81e6c</span>
<span class="w">  </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">code</span>
<span class="w">  </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">e44296e1-cd8e-41f1-a75e-d1e2dc34bf17</span>
<span class="w">  </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">code</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">f2376f1c-2a99-44f6-8b6d-2c7c63426999</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">generate_code_to_generate_code_code_data_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fe833040-7c2b-4ccb-948b-438231a81e6c</span>
<span class="w">  </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">code</span>
<span class="w">  </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fe833040-7c2b-4ccb-948b-438231a81e6c</span>
<span class="w">  </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">code</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4ed023a6-edb7-490e-9231-f6b3c8851631</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">generate_code_to_review_code_data_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fe833040-7c2b-4ccb-948b-438231a81e6c</span>
<span class="w">  </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">code</span>
<span class="w">  </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">05e0070f-20d6-4087-842f-0bc0797e07a7</span>
<span class="w">  </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">code</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8e19ed78-4fb5-4fc8-bbd2-a6f7a84a7193</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">review_code_to_generate_code_review_data_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">05e0070f-20d6-4087-842f-0bc0797e07a7</span>
<span class="w">  </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">review</span>
<span class="w">  </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fe833040-7c2b-4ccb-948b-438231a81e6c</span>
<span class="w">  </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">review</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">b94e7966-1556-498f-a0fc-30d407ec7def</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">review_code_to_is_code_ready_review_data_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">05e0070f-20d6-4087-842f-0bc0797e07a7</span>
<span class="w">  </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">review</span>
<span class="w">  </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">942a3daf-c3d2-40a1-b986-0a50e0027d74</span>
<span class="w">  </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">review</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">edc7ff9d-8e67-4aab-9128-355a6ab10d31</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">review_code_to_is_code_ready_flag_data_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">942a3daf-c3d2-40a1-b986-0a50e0027d74</span>
<span class="w">  </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">is_code_ready</span>
<span class="w">  </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">d2771d05-cea1-4d91-a7ee-e1789db6598e</span>
<span class="w">  </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">is_code_ready</span>
<span class="nt">$referenced_components</span><span class="p">:</span>
<span class="w">  </span><span class="nt">e486b685-8af7-40d0-87c9-3d8a8f8ac9ca</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StartNode</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">e486b685-8af7-40d0-87c9-3d8a8f8ac9ca</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Start node</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_request</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_request</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">  </span><span class="nt">fe833040-7c2b-4ccb-948b-438231a81e6c</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LlmNode</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fe833040-7c2b-4ccb-948b-438231a81e6c</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generate code node</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_request</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">code</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">review</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">code</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">    </span><span class="nt">llm_config</span><span class="p">:</span>
<span class="w">      </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cd9d2aa4-9506-4013-b85c-7c77b275e059</span>
<span class="w">    </span><span class="nt">prompt_template</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;You</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">great</span><span class="nv"> </span><span class="s">code</span><span class="nv"> </span><span class="s">python</span><span class="nv"> </span><span class="s">software</span><span class="nv"> </span><span class="s">engineer.\n\n</span><span class="nv">    </span><span class="s">Please\</span>
<span class="w">      </span><span class="s">\ write</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">python</span><span class="nv"> </span><span class="s">code</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">satisfy</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">following</span><span class="nv"> </span><span class="s">user</span><span class="nv"> </span><span class="s">request:</span><span class="nv"> </span><span class="s">\&quot;{{user_request}}\&quot;\</span>
<span class="w">      </span><span class="s">.\n\n</span><span class="nv">    </span><span class="s">You</span><span class="nv"> </span><span class="s">previously</span><span class="nv"> </span><span class="s">generated</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">following</span><span class="nv"> </span><span class="s">snippet</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">code:\n</span><span class="nv">    </span><span class="s">```\n\</span>
<span class="w">      </span><span class="s">\ </span><span class="nv">   </span><span class="s">{{code}}\n</span><span class="nv">    </span><span class="s">```\n</span><span class="nv">    </span><span class="s">Take</span><span class="nv"> </span><span class="s">inspiration</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">snippet</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">code.\n\n</span><span class="nv"> </span><span class="s">\</span>
<span class="w">      </span><span class="s">\ </span><span class="nv">  </span><span class="s">The</span><span class="nv"> </span><span class="s">code</span><span class="nv"> </span><span class="s">reviewer</span><span class="nv"> </span><span class="s">gave</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">following</span><span class="nv"> </span><span class="s">feedback:\n</span><span class="nv">    </span><span class="s">{{review}}\n</span><span class="nv">    </span><span class="s">Take\</span>
<span class="w">      </span><span class="s">\ also</span><span class="nv"> </span><span class="s">into</span><span class="nv"> </span><span class="s">account</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">comments</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">review\n\n</span><span class="nv">    </span><span class="s">Write</span><span class="nv"> </span><span class="s">only</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">python\</span>
<span class="w">      </span><span class="s">\ code.\n</span><span class="nv">    </span><span class="s">&quot;</span>
<span class="w">  </span><span class="nt">cd9d2aa4-9506-4013-b85c-7c77b275e059</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VllmConfig</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cd9d2aa4-9506-4013-b85c-7c77b275e059</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Vllm model</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">default_generation_parameters</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vllm_url</span>
<span class="w">    </span><span class="nt">model_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">model_id</span>
<span class="w">  </span><span class="nt">05e0070f-20d6-4087-842f-0bc0797e07a7</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LlmNode</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">05e0070f-20d6-4087-842f-0bc0797e07a7</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Review code node</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">code</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">review</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">    </span><span class="nt">llm_config</span><span class="p">:</span>
<span class="w">      </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cd9d2aa4-9506-4013-b85c-7c77b275e059</span>
<span class="w">    </span><span class="nt">prompt_template</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;You</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">great</span><span class="nv"> </span><span class="s">code</span><span class="nv"> </span><span class="s">python</span><span class="nv"> </span><span class="s">software</span><span class="nv"> </span><span class="s">engineer,</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">highly\</span>
<span class="w">      </span><span class="s">\ skilled</span><span class="nv"> </span><span class="s">code</span><span class="nv"> </span><span class="s">reviewer.\n</span><span class="nv">    </span><span class="s">Please</span><span class="nv"> </span><span class="s">review</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">following</span><span class="nv"> </span><span class="s">snippet</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">python\</span>
<span class="w">      </span><span class="s">\ code:\n</span><span class="nv">    </span><span class="s">```\n</span><span class="nv">    </span><span class="s">{{code}}\n</span><span class="nv">    </span><span class="s">```\n</span><span class="nv">    </span><span class="s">&quot;</span>
<span class="w">  </span><span class="nt">942a3daf-c3d2-40a1-b986-0a50e0027d74</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LlmNode</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">942a3daf-c3d2-40a1-b986-0a50e0027d74</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Check if code is ready node</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">review</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">is_code_ready</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">boolean</span>
<span class="w">      </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">    </span><span class="nt">llm_config</span><span class="p">:</span>
<span class="w">      </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cd9d2aa4-9506-4013-b85c-7c77b275e059</span>
<span class="w">    </span><span class="nt">prompt_template</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;You</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">software</span><span class="nv"> </span><span class="s">engineer</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">20</span><span class="nv"> </span><span class="s">years</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">experience.</span><span class="nv"> </span><span class="s">You\</span>
<span class="w">      </span><span class="s">\ have</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">take</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">decision.\n</span><span class="nv">    </span><span class="s">Based</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">following</span><span class="nv"> </span><span class="s">code</span><span class="nv"> </span><span class="s">review,</span><span class="nv"> </span><span class="s">do</span><span class="nv"> </span><span class="s">you</span><span class="nv"> </span><span class="s">think\</span>
<span class="w">      </span><span class="s">\ that</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">code</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">ready</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">deployed?\n</span><span class="nv">    </span><span class="s">```\n</span><span class="nv">    </span><span class="s">{{review}}\n</span><span class="nv">    </span><span class="s">```\n\</span>
<span class="w">      </span><span class="s">\ </span><span class="nv">   </span><span class="s">Please</span><span class="nv"> </span><span class="s">answer</span><span class="nv"> </span><span class="s">only</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">`yes`</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">`no`.\n</span><span class="nv">    </span><span class="s">&quot;</span>
<span class="w">  </span><span class="nt">d2771d05-cea1-4d91-a7ee-e1789db6598e</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BranchingNode</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">d2771d05-cea1-4d91-a7ee-e1789db6598e</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Is code ready branching node</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">is_code_ready</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">boolean</span>
<span class="w">      </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;no&#39;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;yes&#39;</span>
<span class="w">    </span><span class="nt">mapping</span><span class="p">:</span>
<span class="w">      </span><span class="s">&#39;yes&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;yes&#39;</span>
<span class="w">      </span><span class="s">&#39;no&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;no&#39;</span>
<span class="w">  </span><span class="nt">e44296e1-cd8e-41f1-a75e-d1e2dc34bf17</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EndNode</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">e44296e1-cd8e-41f1-a75e-d1e2dc34bf17</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">End node</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">code</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">code</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">branch_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="nt">agentspec_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.4.1</span>
</pre></div>
</div>
</div></div>
</details></section>
</section>
<section id="recap">
<h2>Recap<a class="headerlink" href="#recap" title="Permalink to this heading">#</a></h2>
<p>This how-to guide covered how to:</p>
<ul class="simple">
<li><p>Define properties to document the input and output types of nodes in a flow</p></li>
<li><p>Configure an LLM model</p></li>
<li><p>Define different types of nodes for a flow</p></li>
<li><p>Define edges for controlling the flow (including branching and loops) and passing data between nodes</p></li>
<li><p>Define a flow and export its Agent Spec configuration</p></li>
</ul>
<details class="summary-below-is-the-complete-code-from-this-guide">
<summary>Below is the complete code from this guide.</summary><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.edges.controlflowedge</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlFlowEdge</span>
<span class="linenos">  2</span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.edges.dataflowedge</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataFlowEdge</span>
<span class="linenos">  3</span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="linenos">  4</span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.nodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">BranchingNode</span><span class="p">,</span> <span class="n">EndNode</span><span class="p">,</span> <span class="n">LlmNode</span><span class="p">,</span> <span class="n">StartNode</span>
<span class="linenos">  5</span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.llms.vllmconfig</span><span class="w"> </span><span class="kn">import</span> <span class="n">VllmConfig</span>
<span class="linenos">  6</span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">Property</span>
<span class="linenos">  7</span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.serialization</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentSpecSerializer</span>
<span class="linenos">  8</span>
<span class="linenos">  9</span><span class="n">user_request_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="linenos"> 10</span>    <span class="n">json_schema</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
<span class="linenos"> 11</span>        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;user_request&quot;</span><span class="p">,</span>
<span class="linenos"> 12</span>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="linenos"> 13</span>    <span class="p">)</span>
<span class="linenos"> 14</span><span class="p">)</span>
<span class="linenos"> 15</span>
<span class="linenos"> 16</span><span class="n">code_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="linenos"> 17</span>    <span class="n">json_schema</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
<span class="linenos"> 18</span>        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
<span class="linenos"> 19</span>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="linenos"> 20</span>        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="linenos"> 21</span>    <span class="p">)</span>
<span class="linenos"> 22</span><span class="p">)</span>
<span class="linenos"> 23</span>
<span class="linenos"> 24</span><span class="n">review_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="linenos"> 25</span>    <span class="n">json_schema</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
<span class="linenos"> 26</span>        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;review&quot;</span><span class="p">,</span>
<span class="linenos"> 27</span>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="linenos"> 28</span>        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="linenos"> 29</span>    <span class="p">)</span>
<span class="linenos"> 30</span><span class="p">)</span>
<span class="linenos"> 31</span>
<span class="linenos"> 32</span><span class="n">is_code_ready_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="linenos"> 33</span>    <span class="n">json_schema</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
<span class="linenos"> 34</span>        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;is_code_ready&quot;</span><span class="p">,</span>
<span class="linenos"> 35</span>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
<span class="linenos"> 36</span>        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos"> 37</span>    <span class="p">)</span>
<span class="linenos"> 38</span><span class="p">)</span>
<span class="linenos"> 39</span>
<span class="linenos"> 40</span>
<span class="linenos"> 41</span><span class="n">llm_config</span> <span class="o">=</span> <span class="n">VllmConfig</span><span class="p">(</span>
<span class="linenos"> 42</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Vllm model&quot;</span><span class="p">,</span>
<span class="linenos"> 43</span>    <span class="n">url</span><span class="o">=</span><span class="s2">&quot;vllm_url&quot;</span><span class="p">,</span>
<span class="linenos"> 44</span>    <span class="n">model_id</span><span class="o">=</span><span class="s2">&quot;model_id&quot;</span><span class="p">,</span>
<span class="linenos"> 45</span><span class="p">)</span>
<span class="linenos"> 46</span>
<span class="linenos"> 47</span>
<span class="linenos"> 48</span><span class="n">start_node</span> <span class="o">=</span> <span class="n">StartNode</span><span class="p">(</span>
<span class="linenos"> 49</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Start node&quot;</span><span class="p">,</span>
<span class="linenos"> 50</span>    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">user_request_property</span><span class="p">],</span>
<span class="linenos"> 51</span><span class="p">)</span>
<span class="linenos"> 52</span>
<span class="linenos"> 53</span><span class="n">end_node</span> <span class="o">=</span> <span class="n">EndNode</span><span class="p">(</span>
<span class="linenos"> 54</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;End node&quot;</span><span class="p">,</span>
<span class="linenos"> 55</span>    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">code_property</span><span class="p">],</span>
<span class="linenos"> 56</span><span class="p">)</span>
<span class="linenos"> 57</span>
<span class="linenos"> 58</span>
<span class="linenos"> 59</span><span class="n">generate_code_node</span> <span class="o">=</span> <span class="n">LlmNode</span><span class="p">(</span>
<span class="linenos"> 60</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Generate code node&quot;</span><span class="p">,</span>
<span class="linenos"> 61</span>    <span class="n">prompt_template</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;You are a great code python software engineer.</span>
<span class="linenos"> 62</span>
<span class="linenos"> 63</span><span class="s2">    Please write the python code to satisfy the following user request: &quot;{{user_request}}&quot;.</span>
<span class="linenos"> 64</span>
<span class="linenos"> 65</span><span class="s2">    You previously generated the following snippet of code:</span>
<span class="linenos"> 66</span><span class="s2">    ```</span>
<span class="linenos"> 67</span><span class="s2">    {{code}}</span>
<span class="linenos"> 68</span><span class="s2">    ```</span>
<span class="linenos"> 69</span><span class="s2">    Take inspiration from the snippet of code.</span>
<span class="linenos"> 70</span>
<span class="linenos"> 71</span><span class="s2">    The code reviewer gave the following feedback:</span>
<span class="linenos"> 72</span><span class="s2">    {{review}}</span>
<span class="linenos"> 73</span><span class="s2">    Take also into account the comments in the review</span>
<span class="linenos"> 74</span>
<span class="linenos"> 75</span><span class="s2">    Write only the python code.</span>
<span class="linenos"> 76</span><span class="s2">    &quot;&quot;&quot;</span><span class="p">,</span>
<span class="linenos"> 77</span>    <span class="n">llm_config</span><span class="o">=</span><span class="n">llm_config</span><span class="p">,</span>
<span class="linenos"> 78</span>    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">user_request_property</span><span class="p">,</span> <span class="n">code_property</span><span class="p">,</span> <span class="n">review_property</span><span class="p">],</span>
<span class="linenos"> 79</span>    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">code_property</span><span class="p">],</span>
<span class="linenos"> 80</span><span class="p">)</span>
<span class="linenos"> 81</span>
<span class="linenos"> 82</span><span class="n">review_code_node</span> <span class="o">=</span> <span class="n">LlmNode</span><span class="p">(</span>
<span class="linenos"> 83</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Review code node&quot;</span><span class="p">,</span>
<span class="linenos"> 84</span>    <span class="n">prompt_template</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;You are a great code python software engineer, and a highly skilled code reviewer.</span>
<span class="linenos"> 85</span><span class="s2">    Please review the following snippet of python code:</span>
<span class="linenos"> 86</span><span class="s2">    ```</span>
<span class="linenos"> 87</span><span class="s2">    {{code}}</span>
<span class="linenos"> 88</span><span class="s2">    ```</span>
<span class="linenos"> 89</span><span class="s2">    &quot;&quot;&quot;</span><span class="p">,</span>
<span class="linenos"> 90</span>    <span class="n">llm_config</span><span class="o">=</span><span class="n">llm_config</span><span class="p">,</span>
<span class="linenos"> 91</span>    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">code_property</span><span class="p">],</span>
<span class="linenos"> 92</span>    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">review_property</span><span class="p">],</span>
<span class="linenos"> 93</span><span class="p">)</span>
<span class="linenos"> 94</span>
<span class="linenos"> 95</span><span class="n">is_code_ready_decision_node</span> <span class="o">=</span> <span class="n">LlmNode</span><span class="p">(</span>
<span class="linenos"> 96</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Check if code is ready node&quot;</span><span class="p">,</span>
<span class="linenos"> 97</span>    <span class="n">prompt_template</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;You are a software engineer with 20 years of experience. You have to take a decision.</span>
<span class="linenos"> 98</span><span class="s2">    Based on the following code review, do you think that the code is ready to be deployed?</span>
<span class="linenos"> 99</span><span class="s2">    ```</span>
<span class="linenos">100</span><span class="s2">    {{review}}</span>
<span class="linenos">101</span><span class="s2">    ```</span>
<span class="linenos">102</span><span class="s2">    Please answer only with `yes` or `no`.</span>
<span class="linenos">103</span><span class="s2">    &quot;&quot;&quot;</span><span class="p">,</span>
<span class="linenos">104</span>    <span class="n">llm_config</span><span class="o">=</span><span class="n">llm_config</span><span class="p">,</span>
<span class="linenos">105</span>    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">review_property</span><span class="p">],</span>
<span class="linenos">106</span>    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">is_code_ready_property</span><span class="p">],</span>
<span class="linenos">107</span><span class="p">)</span>
<span class="linenos">108</span>
<span class="linenos">109</span><span class="n">is_code_ready_branching_node</span> <span class="o">=</span> <span class="n">BranchingNode</span><span class="p">(</span>
<span class="linenos">110</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Is code ready branching node&quot;</span><span class="p">,</span>
<span class="linenos">111</span>    <span class="n">mapping</span><span class="o">=</span><span class="p">{</span>
<span class="linenos">112</span>        <span class="s2">&quot;yes&quot;</span><span class="p">:</span> <span class="s2">&quot;yes&quot;</span><span class="p">,</span>
<span class="linenos">113</span>        <span class="s2">&quot;no&quot;</span><span class="p">:</span> <span class="s2">&quot;no&quot;</span><span class="p">,</span>
<span class="linenos">114</span>    <span class="p">},</span>
<span class="linenos">115</span>    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">is_code_ready_property</span><span class="p">],</span>
<span class="linenos">116</span>    <span class="n">outputs</span><span class="o">=</span><span class="p">[],</span>
<span class="linenos">117</span><span class="p">)</span>
<span class="linenos">118</span>
<span class="linenos">119</span><span class="n">control_flow_edges</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos">120</span>    <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="linenos">121</span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;start_to_generate_code_control_edge&quot;</span><span class="p">,</span>
<span class="linenos">122</span>        <span class="n">from_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="linenos">123</span>        <span class="n">to_node</span><span class="o">=</span><span class="n">generate_code_node</span><span class="p">,</span>
<span class="linenos">124</span>    <span class="p">),</span>
<span class="linenos">125</span>    <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="linenos">126</span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;generate_code_to_review_control_edge&quot;</span><span class="p">,</span>
<span class="linenos">127</span>        <span class="n">from_node</span><span class="o">=</span><span class="n">generate_code_node</span><span class="p">,</span>
<span class="linenos">128</span>        <span class="n">to_node</span><span class="o">=</span><span class="n">review_code_node</span><span class="p">,</span>
<span class="linenos">129</span>    <span class="p">),</span>
<span class="linenos">130</span>    <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="linenos">131</span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;review_to_is_code_ready_decision_control_edge&quot;</span><span class="p">,</span>
<span class="linenos">132</span>        <span class="n">from_node</span><span class="o">=</span><span class="n">review_code_node</span><span class="p">,</span>
<span class="linenos">133</span>        <span class="n">to_node</span><span class="o">=</span><span class="n">is_code_ready_decision_node</span><span class="p">,</span>
<span class="linenos">134</span>    <span class="p">),</span>
<span class="linenos">135</span>    <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="linenos">136</span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;is_code_ready_decision_to_is_code_ready_branching_control_edge&quot;</span><span class="p">,</span>
<span class="linenos">137</span>        <span class="n">from_node</span><span class="o">=</span><span class="n">is_code_ready_decision_node</span><span class="p">,</span>
<span class="linenos">138</span>        <span class="n">to_node</span><span class="o">=</span><span class="n">is_code_ready_branching_node</span><span class="p">,</span>
<span class="linenos">139</span>    <span class="p">),</span>
<span class="linenos">140</span>    <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="linenos">141</span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;is_code_ready_branching_to_end_control_edge&quot;</span><span class="p">,</span>
<span class="linenos">142</span>        <span class="n">from_node</span><span class="o">=</span><span class="n">is_code_ready_branching_node</span><span class="p">,</span>
<span class="linenos">143</span>        <span class="n">from_branch</span><span class="o">=</span><span class="s2">&quot;yes&quot;</span><span class="p">,</span>
<span class="linenos">144</span>        <span class="n">to_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">,</span>
<span class="linenos">145</span>    <span class="p">),</span>
<span class="linenos">146</span>    <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="linenos">147</span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;is_code_ready_branching_to_generate_code_control_edge&quot;</span><span class="p">,</span>
<span class="linenos">148</span>        <span class="n">from_node</span><span class="o">=</span><span class="n">is_code_ready_branching_node</span><span class="p">,</span>
<span class="linenos">149</span>        <span class="n">from_branch</span><span class="o">=</span><span class="s2">&quot;no&quot;</span><span class="p">,</span>
<span class="linenos">150</span>        <span class="n">to_node</span><span class="o">=</span><span class="n">generate_code_node</span><span class="p">,</span>
<span class="linenos">151</span>    <span class="p">),</span>
<span class="linenos">152</span><span class="p">]</span>
<span class="linenos">153</span>
<span class="linenos">154</span>
<span class="linenos">155</span><span class="n">data_flow_edges</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos">156</span>    <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">157</span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;start_to_generate_code_user_request_data_edge&quot;</span><span class="p">,</span>
<span class="linenos">158</span>        <span class="n">source_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="linenos">159</span>        <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;user_request&quot;</span><span class="p">,</span>
<span class="linenos">160</span>        <span class="n">destination_node</span><span class="o">=</span><span class="n">generate_code_node</span><span class="p">,</span>
<span class="linenos">161</span>        <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;user_request&quot;</span><span class="p">,</span>
<span class="linenos">162</span>    <span class="p">),</span>
<span class="linenos">163</span>    <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">164</span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;generate_code_to_end_code_data_edge&quot;</span><span class="p">,</span>
<span class="linenos">165</span>        <span class="n">source_node</span><span class="o">=</span><span class="n">generate_code_node</span><span class="p">,</span>
<span class="linenos">166</span>        <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
<span class="linenos">167</span>        <span class="n">destination_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">,</span>
<span class="linenos">168</span>        <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
<span class="linenos">169</span>    <span class="p">),</span>
<span class="linenos">170</span>    <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">171</span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;generate_code_to_generate_code_code_data_edge&quot;</span><span class="p">,</span>
<span class="linenos">172</span>        <span class="n">source_node</span><span class="o">=</span><span class="n">generate_code_node</span><span class="p">,</span>
<span class="linenos">173</span>        <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
<span class="linenos">174</span>        <span class="n">destination_node</span><span class="o">=</span><span class="n">generate_code_node</span><span class="p">,</span>
<span class="linenos">175</span>        <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
<span class="linenos">176</span>    <span class="p">),</span>
<span class="linenos">177</span>    <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">178</span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;generate_code_to_review_code_data_edge&quot;</span><span class="p">,</span>
<span class="linenos">179</span>        <span class="n">source_node</span><span class="o">=</span><span class="n">generate_code_node</span><span class="p">,</span>
<span class="linenos">180</span>        <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
<span class="linenos">181</span>        <span class="n">destination_node</span><span class="o">=</span><span class="n">review_code_node</span><span class="p">,</span>
<span class="linenos">182</span>        <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
<span class="linenos">183</span>    <span class="p">),</span>
<span class="linenos">184</span>    <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">185</span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;review_code_to_generate_code_review_data_edge&quot;</span><span class="p">,</span>
<span class="linenos">186</span>        <span class="n">source_node</span><span class="o">=</span><span class="n">review_code_node</span><span class="p">,</span>
<span class="linenos">187</span>        <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;review&quot;</span><span class="p">,</span>
<span class="linenos">188</span>        <span class="n">destination_node</span><span class="o">=</span><span class="n">generate_code_node</span><span class="p">,</span>
<span class="linenos">189</span>        <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;review&quot;</span><span class="p">,</span>
<span class="linenos">190</span>    <span class="p">),</span>
<span class="linenos">191</span>    <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">192</span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;review_code_to_is_code_ready_review_data_edge&quot;</span><span class="p">,</span>
<span class="linenos">193</span>        <span class="n">source_node</span><span class="o">=</span><span class="n">review_code_node</span><span class="p">,</span>
<span class="linenos">194</span>        <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;review&quot;</span><span class="p">,</span>
<span class="linenos">195</span>        <span class="n">destination_node</span><span class="o">=</span><span class="n">is_code_ready_decision_node</span><span class="p">,</span>
<span class="linenos">196</span>        <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;review&quot;</span><span class="p">,</span>
<span class="linenos">197</span>    <span class="p">),</span>
<span class="linenos">198</span>    <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">199</span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;review_code_to_is_code_ready_flag_data_edge&quot;</span><span class="p">,</span>
<span class="linenos">200</span>        <span class="n">source_node</span><span class="o">=</span><span class="n">is_code_ready_decision_node</span><span class="p">,</span>
<span class="linenos">201</span>        <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;is_code_ready&quot;</span><span class="p">,</span>
<span class="linenos">202</span>        <span class="n">destination_node</span><span class="o">=</span><span class="n">is_code_ready_branching_node</span><span class="p">,</span>
<span class="linenos">203</span>        <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;is_code_ready&quot;</span><span class="p">,</span>
<span class="linenos">204</span>    <span class="p">),</span>
<span class="linenos">205</span><span class="p">]</span>
<span class="linenos">206</span>
<span class="linenos">207</span>
<span class="linenos">208</span><span class="n">final_assistant_flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="linenos">209</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Generate code and review flow&quot;</span><span class="p">,</span>
<span class="linenos">210</span>    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Flow that given a user request, generates a python code snippet to satisfy it and passes it through a code review before returning it&quot;</span><span class="p">,</span>
<span class="linenos">211</span>    <span class="n">start_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="linenos">212</span>    <span class="n">nodes</span><span class="o">=</span><span class="p">[</span>
<span class="linenos">213</span>        <span class="n">start_node</span><span class="p">,</span>
<span class="linenos">214</span>        <span class="n">generate_code_node</span><span class="p">,</span>
<span class="linenos">215</span>        <span class="n">review_code_node</span><span class="p">,</span>
<span class="linenos">216</span>        <span class="n">is_code_ready_decision_node</span><span class="p">,</span>
<span class="linenos">217</span>        <span class="n">is_code_ready_branching_node</span><span class="p">,</span>
<span class="linenos">218</span>        <span class="n">end_node</span><span class="p">,</span>
<span class="linenos">219</span>    <span class="p">],</span>
<span class="linenos">220</span>    <span class="n">control_flow_connections</span><span class="o">=</span><span class="n">control_flow_edges</span><span class="p">,</span>
<span class="linenos">221</span>    <span class="n">data_flow_connections</span><span class="o">=</span><span class="n">data_flow_edges</span><span class="p">,</span>
<span class="linenos">222</span><span class="p">)</span>
<span class="linenos">223</span>
<span class="linenos">224</span>
<span class="linenos">225</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">226</span>    <span class="n">serialized_agent</span> <span class="o">=</span> <span class="n">AgentSpecSerializer</span><span class="p">()</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">final_assistant_flow</span><span class="p">)</span>
<span class="linenos">227</span>    <span class="nb">print</span><span class="p">(</span><span class="n">serialized_agent</span><span class="p">)</span>
</pre></div>
</div>
</details></section>
<section id="next-steps">
<h2>Next steps<a class="headerlink" href="#next-steps" title="Permalink to this heading">#</a></h2>
<p>Having learned how to develop a flow with conditional branches, you may now proceed to <a class="reference internal" href="howto_execute_agentspec_with_wayflow.html"><span class="doc">How to Execute Agent Spec Configuration with WayFlow</span></a>.</p>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#basic-implementation">Basic implementation</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#define-properties">1. Define properties</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#define-the-llm-model">2. Define the LLM model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#define-nodes">3. Define nodes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#define-the-control-and-data-flow-edges">4. Define the control and data flow edges</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#define-and-export-the-flow">5. Define and export the Flow</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#recap">Recap</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#next-steps">Next steps</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=dba54f56160742ef5599"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=dba54f56160742ef5599"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
       Copyright 2025, Oracle and/or its affiliates..
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 6.1.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>