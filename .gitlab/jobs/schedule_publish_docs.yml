schedule_publish_docs:
  stage: trigger
  rules:
    - if: '$CI_PIPELINE_SOURCE == "push" && $CI_COMMIT_BRANCH == "main"'
      changes:
        - docs/pyagentspec/**/*
      when: always
    - when: never
  script:
    - |
      curl -X POST "${JENKINS_URL}/job/Docs/job/publish-Docs/buildWithParameters" \
      --user "$JENKINS_BOT_AUTH" \
      --data-urlencode "BRANCH=main" \
      --data-urlencode "PUBLIC_BRANCH=main"
