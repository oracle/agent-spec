


<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Flows &#8212; PyAgentSpec 26.1.0.dev0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dba54f56160742ef5599" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dba54f56160742ef5599" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css-style.css" />
    <link rel="stylesheet" type="text/css" href="../_static/core.css" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=dba54f56160742ef5599"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dba54f56160742ef5599" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dba54f56160742ef5599" />

  
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/fix-navigation.js"></script>
    <script src="../_static/js/fix-navigation.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'api/flows';</script>
  <script src="../_static/announcement.js"></script>

    <link rel="icon" href="../_static/favicon.svg"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="LLMs" href="llmmodels.html" />
    <link rel="prev" title="Remote Agents" href="remoteagent.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="26.1" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/agentspec-dark.svg" class="logo__image only-light" alt="PyAgentSpec 26.1.0.dev0 documentation - Home"/>
    <img src="../_static/agentspec-white.svg" class="logo__image only-dark pst-js-only" alt="PyAgentSpec 26.1.0.dev0 documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="../docs_home.html">Open Agent Spec</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="../agentspec/index.html">Specification</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="index.html">API Reference</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="../changelog.html">Release Notes</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="../misc/reference_sheet.html">Reference Sheet</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="../contributing.html">Contributing</a>
    </li>
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="../docs_home.html">Open Agent Spec</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="../agentspec/index.html">Specification</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="index.html">API Reference</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="../changelog.html">Release Notes</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="../misc/reference_sheet.html">Reference Sheet</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link nav-internal" href="../contributing.html">Contributing</a>
    </li>
  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Agent Spec</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../agentspec/index.html">Agent Spec Specification</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../agentspec/intro_and_motivation.html">Introduction, motivation &amp; vision</a></li>
<li class="toctree-l2"><a class="reference internal" href="../agentspec/language_spec_25_4_1.html">Language specification (v25.4.1)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../agentspec/positioning.html">Positioning in the agentic ecosystem</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Essentials</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../howtoguides/index.html">How-to guides</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_agents.html">How to build a simple ReAct Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_mcp.html">How to connect MCP tools to assistants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_flow_with_conditional_branches.html">How to Develop a Flow with Conditional Branches</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_agent_with_remote_tools.html">How to Develop an Agent with Remote Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_mapnode.html">Do Map and Reduce Operations in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_orchestrator_agent.html">How to Build an Orchestrator-Workers Agents Pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_generation_config.html">Specify the Generation Configuration when Using LLMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_llm_from_different_providers.html">Use LLM from Different LLM Sources and Providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_ociagent.html">Use OCI Generative AI Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_execute_agentspec_with_wayflow.html">How to Execute Agent Spec Configuration with WayFlow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_execute_agentspec_across_frameworks.html">How to Execute Agent Spec Across Frameworks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_plugin.html">How to use custom components with the Plugin System</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">API Reference</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="components.html">Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="agent.html">Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="remoteagent.html">Remote Agents</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Flows &amp; Nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="llmmodels.html">LLMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html">Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="ioproperties.html">IO Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="mcp.html">MCP</a></li>
<li class="toctree-l2"><a class="reference internal" href="serialization.html">Serialization / Deserialization</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../misc/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/reference_sheet.html">Reference Sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security Considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faqs.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Release Notes</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../docs_home.html" class="nav-link">Open Agent Specification (Agent Spec)</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">API Reference</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Flows</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="flows">
<h1>Flows<a class="headerlink" href="#flows" title="Permalink to this heading">#</a></h1>
<p>This page presents all APIs and classes related to Flows and nodes in PyAgentSpec.</p>
<section id="flows-nodes">
<h2>Flows &amp; Nodes<a class="headerlink" href="#flows-nodes" title="Permalink to this heading">#</a></h2>
<span class="target" id="flow"></span><dl class="py class">
<dt class="sig sig-object py" id="pyagentspec.flows.flow.Flow">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyagentspec.flows.flow.</span></span><span class="sig-name descname"><span class="pre">Flow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">control_flow_connections</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_flow_connections=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyagentspec.flows.flow.Flow" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="components.html#pyagentspec.agenticcomponent.AgenticComponent" title="pyagentspec.agenticcomponent.AgenticComponent"><code class="xref py py-class docutils literal notranslate"><span class="pre">AgenticComponent</span></code></a></p>
<p>A flow is a component to model sequences of operations to do in a precised order.</p>
<p>The operations and sequence is defined by the nodes and transitions associated to the flow.
Steps can be deterministic, or for some use LLMs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<em>str</em>) – A unique identifier for this Component</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of this Component</p></li>
<li><p><strong>description</strong> (<em>str</em><em> | </em><em>None</em>) – Optional description of this Component</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Optional, additional metadata related to this Component</p></li>
<li><p><strong>min_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>max_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>inputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of inputs accepted by this component</p></li>
<li><p><strong>outputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of outputs exposed by this component</p></li>
<li><p><strong>start_node</strong> (<a class="reference internal" href="#pyagentspec.flows.node.Node" title="pyagentspec.flows.node.Node"><em>Node</em></a>) – The starting node of this flow. It must be also part of the nodes list</p></li>
<li><p><strong>nodes</strong> (<em>List</em><em>[</em><a class="reference internal" href="#pyagentspec.flows.node.Node" title="pyagentspec.flows.node.Node"><em>Node</em></a><em>]</em>) – The list of nodes that compose this Flow</p></li>
<li><p><strong>control_flow_connections</strong> (<em>List</em><em>[</em><a class="reference internal" href="#pyagentspec.flows.edges.controlflowedge.ControlFlowEdge" title="pyagentspec.flows.edges.controlflowedge.ControlFlowEdge"><em>ControlFlowEdge</em></a><em>]</em>) – The list of edges that define the control flow of this Flow</p></li>
<li><p><strong>data_flow_connections</strong> (<em>List</em><em>[</em><a class="reference internal" href="#pyagentspec.flows.edges.dataflowedge.DataFlowEdge" title="pyagentspec.flows.edges.dataflowedge.DataFlowEdge"><em>DataFlowEdge</em></a><em>] </em><em>| </em><em>None</em>) – The list of edges that define the data flow of this Flow</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">Property</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.edges</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlFlowEdge</span><span class="p">,</span> <span class="n">DataFlowEdge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.nodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">LlmNode</span><span class="p">,</span> <span class="n">StartNode</span><span class="p">,</span> <span class="n">EndNode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;prompt&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">llm_output_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;llm_output&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_node</span> <span class="o">=</span> <span class="n">StartNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start&quot;</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">prompt_property</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">end_node</span> <span class="o">=</span> <span class="n">EndNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">llm_output_property</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">llm_node</span> <span class="o">=</span> <span class="n">LlmNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;simple llm node&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">llm_config</span><span class="o">=</span><span class="n">llm_config</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">prompt_template</span><span class="o">=</span><span class="s2">&quot;{{prompt}}&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">prompt_property</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">llm_output_property</span><span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Simple prompting flow&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">nodes</span><span class="o">=</span><span class="p">[</span><span class="n">start_node</span><span class="p">,</span> <span class="n">llm_node</span><span class="p">,</span> <span class="n">end_node</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">control_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start_to_llm&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;llm_to_end&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">data_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;prompt_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;prompt&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;prompt&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;llm_output_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;llm_output&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;llm_output&quot;</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="node"></span><dl class="py class">
<dt class="sig sig-object py" id="pyagentspec.flows.node.Node">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyagentspec.flows.node.</span></span><span class="sig-name descname"><span class="pre">Node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branches=&lt;factory&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyagentspec.flows.node.Node" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="components.html#pyagentspec.component.ComponentWithIO" title="pyagentspec.component.ComponentWithIO"><code class="xref py py-class docutils literal notranslate"><span class="pre">ComponentWithIO</span></code></a></p>
<p>Base class for all nodes that can be put inside a flow.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<em>str</em>) – A unique identifier for this Component</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of this Component</p></li>
<li><p><strong>description</strong> (<em>str</em><em> | </em><em>None</em>) – Optional description of this Component</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Optional, additional metadata related to this Component</p></li>
<li><p><strong>min_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>max_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>inputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of inputs accepted by this component</p></li>
<li><p><strong>outputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of outputs exposed by this component</p></li>
<li><p><strong>branches</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – The list of outgoing branch names that the node will expose</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.node.Node.DEFAULT_NEXT_BRANCH">
<span class="sig-name descname"><span class="pre">DEFAULT_NEXT_BRANCH</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'next'</span></em><a class="headerlink" href="#pyagentspec.flows.node.Node.DEFAULT_NEXT_BRANCH" title="Permalink to this definition">#</a></dt>
<dd><p>Name used for the default branch</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.node.Node.branches">
<span class="sig-name descname"><span class="pre">branches</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pyagentspec.flows.node.Node.branches" title="Permalink to this definition">#</a></dt>
<dd><p>The list of outgoing branch names that the node will expose</p>
</dd></dl>

</dd></dl>

<span class="target" id="dataflowedge"></span><dl class="py class">
<dt class="sig sig-object py" id="pyagentspec.flows.edges.dataflowedge.DataFlowEdge">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyagentspec.flows.edges.dataflowedge.</span></span><span class="sig-name descname"><span class="pre">DataFlowEdge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination_node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination_input</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyagentspec.flows.edges.dataflowedge.DataFlowEdge" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="components.html#pyagentspec.component.Component" title="pyagentspec.component.Component"><code class="xref py py-class docutils literal notranslate"><span class="pre">Component</span></code></a></p>
<p>A data flow edge specifies how the output of a node propagates as input of another node.</p>
<p>An outputs can be propagated as input of several nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<em>str</em>) – A unique identifier for this Component</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of this Component</p></li>
<li><p><strong>description</strong> (<em>str</em><em> | </em><em>None</em>) – Optional description of this Component</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Optional, additional metadata related to this Component</p></li>
<li><p><strong>min_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>max_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>source_node</strong> (<a class="reference internal" href="#pyagentspec.flows.node.Node" title="pyagentspec.flows.node.Node"><em>Node</em></a>) – The instance of the source Node</p></li>
<li><p><strong>source_output</strong> (<em>str</em>) – The name of the property among the source node outputs that should be connected</p></li>
<li><p><strong>destination_node</strong> (<a class="reference internal" href="#pyagentspec.flows.node.Node" title="pyagentspec.flows.node.Node"><em>Node</em></a>) – The instance of the destination Node</p></li>
<li><p><strong>destination_input</strong> (<em>str</em>) – The name of the property among the destination node inputs that should be connected</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.edges.dataflowedge.DataFlowEdge.destination_input">
<span class="sig-name descname"><span class="pre">destination_input</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#pyagentspec.flows.edges.dataflowedge.DataFlowEdge.destination_input" title="Permalink to this definition">#</a></dt>
<dd><p>The name of the property among the destination node inputs that should be connected</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.edges.dataflowedge.DataFlowEdge.destination_node">
<span class="sig-name descname"><span class="pre">destination_node</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pyagentspec.flows.node.Node" title="pyagentspec.flows.node.Node"><span class="pre">Node</span></a></em><a class="headerlink" href="#pyagentspec.flows.edges.dataflowedge.DataFlowEdge.destination_node" title="Permalink to this definition">#</a></dt>
<dd><p>The instance of the destination Node</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.edges.dataflowedge.DataFlowEdge.source_node">
<span class="sig-name descname"><span class="pre">source_node</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pyagentspec.flows.node.Node" title="pyagentspec.flows.node.Node"><span class="pre">Node</span></a></em><a class="headerlink" href="#pyagentspec.flows.edges.dataflowedge.DataFlowEdge.source_node" title="Permalink to this definition">#</a></dt>
<dd><p>The instance of the source Node</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.edges.dataflowedge.DataFlowEdge.source_output">
<span class="sig-name descname"><span class="pre">source_output</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#pyagentspec.flows.edges.dataflowedge.DataFlowEdge.source_output" title="Permalink to this definition">#</a></dt>
<dd><p>The name of the property among the source node outputs that should be connected</p>
</dd></dl>

</dd></dl>

<span class="target" id="controlflowedge"></span><dl class="py class">
<dt class="sig sig-object py" id="pyagentspec.flows.edges.controlflowedge.ControlFlowEdge">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyagentspec.flows.edges.controlflowedge.</span></span><span class="sig-name descname"><span class="pre">ControlFlowEdge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">from_node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">from_branch=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyagentspec.flows.edges.controlflowedge.ControlFlowEdge" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="components.html#pyagentspec.component.Component" title="pyagentspec.component.Component"><code class="xref py py-class docutils literal notranslate"><span class="pre">Component</span></code></a></p>
<p>A control flow edge specifies a possible transition from a node to another in a flow.</p>
<p>A single node can have several potential next nodes, in which case several control flow edges
should be present in the control flow connections of that flow.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<em>str</em>) – A unique identifier for this Component</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of this Component</p></li>
<li><p><strong>description</strong> (<em>str</em><em> | </em><em>None</em>) – Optional description of this Component</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Optional, additional metadata related to this Component</p></li>
<li><p><strong>min_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>max_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>from_node</strong> (<a class="reference internal" href="#pyagentspec.flows.node.Node" title="pyagentspec.flows.node.Node"><em>Node</em></a>) – The instance of the source Node</p></li>
<li><p><strong>from_branch</strong> (<em>str</em><em> | </em><em>None</em>) – The name of the branch to connect.
It must be among the list of branches offered by the from_node</p></li>
<li><p><strong>to_node</strong> (<a class="reference internal" href="#pyagentspec.flows.node.Node" title="pyagentspec.flows.node.Node"><em>Node</em></a>) – The instance of the destination Node</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.edges.controlflowedge.ControlFlowEdge.from_branch">
<span class="sig-name descname"><span class="pre">from_branch</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#pyagentspec.flows.edges.controlflowedge.ControlFlowEdge.from_branch" title="Permalink to this definition">#</a></dt>
<dd><p>The name of the branch to connect.
It must be among the list of branches offered by the from_node</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.edges.controlflowedge.ControlFlowEdge.from_node">
<span class="sig-name descname"><span class="pre">from_node</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pyagentspec.flows.node.Node" title="pyagentspec.flows.node.Node"><span class="pre">Node</span></a></em><a class="headerlink" href="#pyagentspec.flows.edges.controlflowedge.ControlFlowEdge.from_node" title="Permalink to this definition">#</a></dt>
<dd><p>The instance of the source Node</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.edges.controlflowedge.ControlFlowEdge.to_node">
<span class="sig-name descname"><span class="pre">to_node</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pyagentspec.flows.node.Node" title="pyagentspec.flows.node.Node"><span class="pre">Node</span></a></em><a class="headerlink" href="#pyagentspec.flows.edges.controlflowedge.ControlFlowEdge.to_node" title="Permalink to this definition">#</a></dt>
<dd><p>The instance of the destination Node</p>
</dd></dl>

</dd></dl>

</section>
<section id="nodes">
<span id="presentnode"></span><h2>Nodes<a class="headerlink" href="#nodes" title="Permalink to this heading">#</a></h2>
<span class="target" id="agentnode"></span><dl class="py class">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.agentnode.AgentNode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyagentspec.flows.nodes.agentnode.</span></span><span class="sig-name descname"><span class="pre">AgentNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branches=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agent</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyagentspec.flows.nodes.agentnode.AgentNode" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyagentspec.flows.node.Node" title="pyagentspec.flows.node.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a></p>
<p>The agent execution node is a node that will execute an agent as part of a flow.</p>
<p>If branches are configured, the agent will be prompted to select a branch before the agent node
completes to transition to another node of the Flow.</p>
<ul class="simple">
<li><dl class="simple">
<dt><strong>Inputs</strong></dt><dd><p>Inferred from the definition of the agent to execute.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Outputs</strong></dt><dd><p>Inferred from the definition of the agent to execute.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Branches</strong></dt><dd><p>One, the default next.</p>
</dd>
</dl>
</li>
</ul>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.edges</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlFlowEdge</span><span class="p">,</span> <span class="n">DataFlowEdge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.agent</span><span class="w"> </span><span class="kn">import</span> <span class="n">Agent</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">Property</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.nodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentNode</span><span class="p">,</span> <span class="n">StartNode</span><span class="p">,</span> <span class="n">EndNode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.tools</span><span class="w"> </span><span class="kn">import</span> <span class="n">ServerTool</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span><span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;query&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">search_results_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;search_results&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span> <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">search_tool</span> <span class="o">=</span> <span class="n">ServerTool</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;search_tool&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">description</span><span class="o">=</span><span class="p">(</span>
<span class="gp">... </span>       <span class="s2">&quot;This tool runs a web search with the given query &quot;</span>
<span class="gp">... </span>       <span class="s2">&quot;and returns the most relevant results&quot;</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span>    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">query_property</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">search_results_property</span><span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Search agent&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">llm_config</span><span class="o">=</span><span class="n">llm_config</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">system_prompt</span><span class="o">=</span><span class="p">(</span>
<span class="gp">... </span>        <span class="s2">&quot;Your task is to gather the required information for the user: {{query}}&quot;</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span>    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">search_tool</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">search_results_property</span><span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_node</span> <span class="o">=</span> <span class="n">StartNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start&quot;</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">query_property</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">end_node</span> <span class="o">=</span> <span class="n">EndNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">search_results_property</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">agent_node</span> <span class="o">=</span> <span class="n">AgentNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Search agent node&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">agent</span><span class="o">=</span><span class="n">agent</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Search agent flow&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">nodes</span><span class="o">=</span><span class="p">[</span><span class="n">start_node</span><span class="p">,</span> <span class="n">agent_node</span><span class="p">,</span> <span class="n">end_node</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">control_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start_to_agent&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">agent_node</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;agent_to_end&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">agent_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">data_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;query_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;query&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">agent_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;query&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;search_results_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">agent_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;search_results&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;search_results&quot;</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<em>str</em>) – A unique identifier for this Component</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of this Component</p></li>
<li><p><strong>description</strong> (<em>str</em><em> | </em><em>None</em>) – Optional description of this Component</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Optional, additional metadata related to this Component</p></li>
<li><p><strong>min_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>max_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>inputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of inputs accepted by this component</p></li>
<li><p><strong>outputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of outputs exposed by this component</p></li>
<li><p><strong>branches</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – The list of outgoing branch names that the node will expose</p></li>
<li><p><strong>agent</strong> (<a class="reference internal" href="components.html#pyagentspec.agenticcomponent.AgenticComponent" title="pyagentspec.agenticcomponent.AgenticComponent"><em>AgenticComponent</em></a>) – The agentic component that will be called as part of the execution of this node</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.agentnode.AgentNode.agent">
<span class="sig-name descname"><span class="pre">agent</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="components.html#pyagentspec.agenticcomponent.AgenticComponent" title="pyagentspec.agenticcomponent.AgenticComponent"><span class="pre">AgenticComponent</span></a></em><a class="headerlink" href="#pyagentspec.flows.nodes.agentnode.AgentNode.agent" title="Permalink to this definition">#</a></dt>
<dd><p>The agentic component that will be called as part of the execution of this node</p>
</dd></dl>

</dd></dl>

<span class="target" id="apinode"></span><dl class="py class">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.apinode.ApiNode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyagentspec.flows.nodes.apinode.</span></span><span class="sig-name descname"><span class="pre">ApiNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branches=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">http_method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_spec_uri=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_params=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers=&lt;factory&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyagentspec.flows.nodes.apinode.ApiNode" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyagentspec.flows.node.Node" title="pyagentspec.flows.node.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a></p>
<p>Make an API call.</p>
<p>This node is intended to be a part of a Flow.</p>
<ul class="simple">
<li><dl class="simple">
<dt><strong>Inputs</strong></dt><dd><p>Inferred from the json spec retrieved from API Spec URI, if available and reachable.
Otherwise, users have to manually specify them.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Outputs</strong></dt><dd><p>Inferred from the json spec retrieved from API Spec URI, if available and reachable.
Otherwise, users have to manually specify them.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Branches</strong></dt><dd><p>One, the default next.</p>
</dd>
</dl>
</li>
</ul>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.nodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">ApiNode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">Property</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">weather_result_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>        <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;zurich_weather&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
<span class="gp">... </span>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Temperature in celsius degrees&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="p">},</span>
<span class="gp">... </span>            <span class="s2">&quot;weather&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}</span>
<span class="gp">... </span>        <span class="p">},</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">call_current_weather_step</span> <span class="o">=</span> <span class="n">ApiNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Weather API call node&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://example.com/weather&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">http_method</span> <span class="o">=</span> <span class="s2">&quot;GET&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">query_params</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>        <span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="s2">&quot;zurich&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">weather_result_property</span><span class="p">]</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">item_id_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;item_id&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">order_id_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;order_id&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">store_id_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;store_id&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session_id_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;session_id&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">create_order_step</span> <span class="o">=</span> <span class="n">ApiNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Orders api call node&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://example.com/orders/{{ order_id }}&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">http_method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="c1"># sending an object which will automatically be transformed into JSON</span>
<span class="gp">... </span>    <span class="n">data</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>        <span class="c1"># define a static body parameter</span>
<span class="gp">... </span>        <span class="s2">&quot;topic_id&quot;</span><span class="p">:</span> <span class="mi">12345</span><span class="p">,</span>
<span class="gp">... </span>        <span class="c1"># define a templated body parameter.</span>
<span class="gp">... </span>        <span class="c1"># The value for {{ item_id }} will be taken from the IO system at runtime</span>
<span class="gp">... </span>        <span class="s2">&quot;item_id&quot;</span><span class="p">:</span> <span class="s2">&quot;{{ item_id }}&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="n">query_params</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>        <span class="c1"># provide one templated query parameter called &quot;store_id&quot;</span>
<span class="gp">... </span>        <span class="c1"># which will take its value from the IO system from key &quot;store_id&quot;</span>
<span class="gp">... </span>        <span class="s2">&quot;store_id&quot;</span><span class="p">:</span> <span class="s2">&quot;{{ store_id }}&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="n">headers</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>        <span class="c1"># set header session_id. the value is coming from the IO system</span>
<span class="gp">... </span>        <span class="s2">&quot;session_id&quot;</span><span class="p">:</span> <span class="s2">&quot;{{ session_id }}&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">item_id_property</span><span class="p">,</span> <span class="n">order_id_property</span><span class="p">,</span> <span class="n">store_id_property</span><span class="p">,</span> <span class="n">session_id_property</span><span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<em>str</em>) – A unique identifier for this Component</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of this Component</p></li>
<li><p><strong>description</strong> (<em>str</em><em> | </em><em>None</em>) – Optional description of this Component</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Optional, additional metadata related to this Component</p></li>
<li><p><strong>min_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>max_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>inputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of inputs accepted by this component</p></li>
<li><p><strong>outputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of outputs exposed by this component</p></li>
<li><p><strong>branches</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – The list of outgoing branch names that the node will expose</p></li>
<li><p><strong>url</strong> (<em>str</em>) – The url of the API to which the call should be forwarded.
Allows placeholders, which can define inputs</p></li>
<li><p><strong>http_method</strong> (<em>str</em>) – The HTTP method to use for the API call (e.g., GET, POST, PUT, …).
Allows placeholders, which can define inputs</p></li>
<li><p><strong>api_spec_uri</strong> (<em>str</em><em> | </em><em>None</em>) – The uri of the specification of the API that is going to be called.
Allows placeholders, which can define inputs</p></li>
<li><p><strong>data</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – The data to send as part of the body of this API call.
Allows placeholders in dict values, which can define inputs</p></li>
<li><p><strong>query_params</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – Query parameters for the API call.
Allows placeholders in dict values, which can define inputs</p></li>
<li><p><strong>headers</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – Additional headers for the API call.
Allows placeholders in dict values, which can define inputs</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.apinode.ApiNode.DEFAULT_OUTPUT">
<span class="sig-name descname"><span class="pre">DEFAULT_OUTPUT</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'response'</span></em><a class="headerlink" href="#pyagentspec.flows.nodes.apinode.ApiNode.DEFAULT_OUTPUT" title="Permalink to this definition">#</a></dt>
<dd><p>Input key for the name to transition to next.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.apinode.ApiNode.api_spec_uri">
<span class="sig-name descname"><span class="pre">api_spec_uri</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#pyagentspec.flows.nodes.apinode.ApiNode.api_spec_uri" title="Permalink to this definition">#</a></dt>
<dd><p>The uri of the specification of the API that is going to be called.
Allows placeholders, which can define inputs</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.apinode.ApiNode.data">
<span class="sig-name descname"><span class="pre">data</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pyagentspec.flows.nodes.apinode.ApiNode.data" title="Permalink to this definition">#</a></dt>
<dd><p>The data to send as part of the body of this API call.
Allows placeholders in dict values, which can define inputs</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.apinode.ApiNode.headers">
<span class="sig-name descname"><span class="pre">headers</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pyagentspec.flows.nodes.apinode.ApiNode.headers" title="Permalink to this definition">#</a></dt>
<dd><p>Additional headers for the API call.
Allows placeholders in dict values, which can define inputs</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.apinode.ApiNode.http_method">
<span class="sig-name descname"><span class="pre">http_method</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#pyagentspec.flows.nodes.apinode.ApiNode.http_method" title="Permalink to this definition">#</a></dt>
<dd><p>The HTTP method to use for the API call (e.g., GET, POST, PUT, …).
Allows placeholders, which can define inputs</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.apinode.ApiNode.query_params">
<span class="sig-name descname"><span class="pre">query_params</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pyagentspec.flows.nodes.apinode.ApiNode.query_params" title="Permalink to this definition">#</a></dt>
<dd><p>Query parameters for the API call.
Allows placeholders in dict values, which can define inputs</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.apinode.ApiNode.url">
<span class="sig-name descname"><span class="pre">url</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#pyagentspec.flows.nodes.apinode.ApiNode.url" title="Permalink to this definition">#</a></dt>
<dd><p>The url of the API to which the call should be forwarded.
Allows placeholders, which can define inputs</p>
</dd></dl>

</dd></dl>

<span class="target" id="branchingnode"></span><dl class="py class">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.branchingnode.BranchingNode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyagentspec.flows.nodes.branchingnode.</span></span><span class="sig-name descname"><span class="pre">BranchingNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branches=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mapping</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyagentspec.flows.nodes.branchingnode.BranchingNode" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyagentspec.flows.node.Node" title="pyagentspec.flows.node.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a></p>
<p>Select the next node to transition to based on a mapping.</p>
<p>The input is used as key for the mapping. If the input does not correspond to any of the keys
of the mapping the branch ‘default’ will be selected. This node is intended to be a part of a
Flow.</p>
<ul class="simple">
<li><dl class="simple">
<dt><strong>Inputs</strong></dt><dd><p>The input value that should be used as key for the mapping.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Outputs</strong></dt><dd><p>None.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Branches</strong></dt><dd><p>One for each value in the mapping, plus a branch called <code class="docutils literal notranslate"><span class="pre">default</span></code>,
which is the branch taken by the flow when mapping fails
(i.e., the input does not match any key in the mapping).</p>
</dd>
</dl>
</li>
</ul>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.agent</span><span class="w"> </span><span class="kn">import</span> <span class="n">Agent</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.edges</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlFlowEdge</span><span class="p">,</span> <span class="n">DataFlowEdge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.nodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentNode</span><span class="p">,</span> <span class="n">BranchingNode</span><span class="p">,</span> <span class="n">StartNode</span><span class="p">,</span> <span class="n">EndNode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">Property</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CORRECT_PASSWORD_BRANCH</span> <span class="o">=</span> <span class="s2">&quot;PASSWORD_OK&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">password_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;password&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;User input agent&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">llm_config</span><span class="o">=</span><span class="n">llm_config</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">system_prompt</span><span class="o">=</span><span class="p">(</span>
<span class="gp">... </span>        <span class="s2">&quot;Your task is to ask the password to the user. &quot;</span>
<span class="gp">... </span>        <span class="s2">&quot;Once you get it, submit it and end.&quot;</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span>    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">password_property</span><span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_node</span> <span class="o">=</span> <span class="n">StartNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">access_granted_end_node</span> <span class="o">=</span> <span class="n">EndNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;access granted end&quot;</span><span class="p">,</span> <span class="n">branch_name</span><span class="o">=</span><span class="s2">&quot;ACCESS_GRANTED&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">access_denied_end_node</span> <span class="o">=</span> <span class="n">EndNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;access denied end&quot;</span><span class="p">,</span> <span class="n">branch_name</span><span class="o">=</span><span class="s2">&quot;ACCESS_DENIED&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">branching_node</span> <span class="o">=</span> <span class="n">BranchingNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;password check&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">mapping</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;123456&quot;</span><span class="p">:</span> <span class="n">CORRECT_PASSWORD_BRANCH</span><span class="p">},</span>
<span class="gp">... </span>    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">password_property</span><span class="p">]</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">agent_node</span> <span class="o">=</span> <span class="n">AgentNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;User input agent node&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">agent</span><span class="o">=</span><span class="n">agent</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assistant</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Check access flow&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">nodes</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">agent_node</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">branching_node</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">access_granted_end_node</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">access_denied_end_node</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">control_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;start_to_agent&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">from_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">to_node</span><span class="o">=</span><span class="n">agent_node</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;agent_to_branching&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">from_node</span><span class="o">=</span><span class="n">agent_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">to_node</span><span class="o">=</span><span class="n">branching_node</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;branching_to_access_granted&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">from_node</span><span class="o">=</span><span class="n">branching_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">from_branch</span><span class="o">=</span><span class="n">CORRECT_PASSWORD_BRANCH</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">to_node</span><span class="o">=</span><span class="n">access_granted_end_node</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;branching_to_access_denied&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">from_node</span><span class="o">=</span><span class="n">branching_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">from_branch</span><span class="o">=</span><span class="n">BranchingNode</span><span class="o">.</span><span class="n">DEFAULT_BRANCH</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">to_node</span><span class="o">=</span><span class="n">access_denied_end_node</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">data_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;password_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">agent_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;password&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">branching_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;password&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<em>str</em>) – A unique identifier for this Component</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of this Component</p></li>
<li><p><strong>description</strong> (<em>str</em><em> | </em><em>None</em>) – Optional description of this Component</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Optional, additional metadata related to this Component</p></li>
<li><p><strong>min_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>max_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>inputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of inputs accepted by this component</p></li>
<li><p><strong>outputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of outputs exposed by this component</p></li>
<li><p><strong>branches</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – The list of outgoing branch names that the node will expose</p></li>
<li><p><strong>mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – The mapping between the value of the input and the name of the outgoing branch
that will be taken when that input value is given</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.branchingnode.BranchingNode.DEFAULT_BRANCH">
<span class="sig-name descname"><span class="pre">DEFAULT_BRANCH</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'default'</span></em><a class="headerlink" href="#pyagentspec.flows.nodes.branchingnode.BranchingNode.DEFAULT_BRANCH" title="Permalink to this definition">#</a></dt>
<dd><p>Name of the default branch used when mapping fails</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.branchingnode.BranchingNode.DEFAULT_INPUT">
<span class="sig-name descname"><span class="pre">DEFAULT_INPUT</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'branching_mapping_key'</span></em><a class="headerlink" href="#pyagentspec.flows.nodes.branchingnode.BranchingNode.DEFAULT_INPUT" title="Permalink to this definition">#</a></dt>
<dd><p>Input key for the name to transition to next.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.branchingnode.BranchingNode.mapping">
<span class="sig-name descname"><span class="pre">mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pyagentspec.flows.nodes.branchingnode.BranchingNode.mapping" title="Permalink to this definition">#</a></dt>
<dd><p>The mapping between the value of the input and the name of the outgoing branch
that will be taken when that input value is given</p>
</dd></dl>

</dd></dl>

<span class="target" id="endnode"></span><dl class="py class">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.endnode.EndNode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyagentspec.flows.nodes.endnode.</span></span><span class="sig-name descname"><span class="pre">EndNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branches=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branch_name='next'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyagentspec.flows.nodes.endnode.EndNode" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyagentspec.flows.node.Node" title="pyagentspec.flows.node.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a></p>
<p>End nodes denote the end of the execution of a flow.</p>
<p>There might be several end nodes in a flow, in which case the executor of the flow
should be able to track which one was reached and pass that back to the caller.</p>
<ul class="simple">
<li><dl class="simple">
<dt><strong>Inputs</strong></dt><dd><p>The list of inputs of the step. If both input and output properties are specified they
must be an exact match</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Outputs</strong></dt><dd><p>The list of outputs that should be exposed by the flow. If both input and output properties
are specified they must be an exact match</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Branches</strong></dt><dd><p>None.</p>
</dd>
</dl>
</li>
</ul>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.agent</span><span class="w"> </span><span class="kn">import</span> <span class="n">Agent</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.edges</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlFlowEdge</span><span class="p">,</span> <span class="n">DataFlowEdge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.nodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentNode</span><span class="p">,</span> <span class="n">BranchingNode</span><span class="p">,</span> <span class="n">StartNode</span><span class="p">,</span> <span class="n">EndNode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">Property</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">languages_to_branch_name</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s2">&quot;english&quot;</span><span class="p">:</span> <span class="s2">&quot;ENGLISH&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">&quot;spanish&quot;</span><span class="p">:</span> <span class="s2">&quot;SPANISH&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">&quot;italian&quot;</span><span class="p">:</span> <span class="s2">&quot;ITALIAN&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">language_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;language&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Language detector agent&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">llm_config</span><span class="o">=</span><span class="n">llm_config</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">system_prompt</span><span class="o">=</span><span class="p">(</span>
<span class="gp">... </span>        <span class="s2">&quot;Your task is to understand the language spoken by the user.&quot;</span>
<span class="gp">... </span>        <span class="s2">&quot;Please output only the language in lowercase and submit.&quot;</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span>    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">language_property</span><span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_node</span> <span class="o">=</span> <span class="n">StartNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">english_end_node</span> <span class="o">=</span> <span class="n">EndNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;english end&quot;</span><span class="p">,</span> <span class="n">branch_name</span><span class="o">=</span><span class="n">languages_to_branch_name</span><span class="p">[</span><span class="s2">&quot;english&quot;</span><span class="p">]</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spanish_end_node</span> <span class="o">=</span> <span class="n">EndNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;spanish end&quot;</span><span class="p">,</span> <span class="n">branch_name</span><span class="o">=</span><span class="n">languages_to_branch_name</span><span class="p">[</span><span class="s2">&quot;spanish&quot;</span><span class="p">]</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">italian_end_node</span> <span class="o">=</span> <span class="n">EndNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;italian end&quot;</span><span class="p">,</span> <span class="n">branch_name</span><span class="o">=</span><span class="n">languages_to_branch_name</span><span class="p">[</span><span class="s2">&quot;italian&quot;</span><span class="p">]</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unknown_end_node</span> <span class="o">=</span> <span class="n">EndNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;unknown language end&quot;</span><span class="p">,</span> <span class="n">branch_name</span><span class="o">=</span><span class="s2">&quot;unknown&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">branching_node</span> <span class="o">=</span> <span class="n">BranchingNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;language check&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">mapping</span><span class="o">=</span><span class="n">languages_to_branch_name</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">language_property</span><span class="p">]</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">agent_node</span> <span class="o">=</span> <span class="n">AgentNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;User input agent node&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">agent</span><span class="o">=</span><span class="n">agent</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assistant</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Check access flow&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">nodes</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">agent_node</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">branching_node</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">english_end_node</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">spanish_end_node</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">italian_end_node</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">unknown_end_node</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">control_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;start_to_agent&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">agent_node</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;agent_to_branching&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">agent_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">branching_node</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;branching_to_english_end&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">from_node</span><span class="o">=</span><span class="n">branching_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">from_branch</span><span class="o">=</span><span class="n">languages_to_branch_name</span><span class="p">[</span><span class="s2">&quot;english&quot;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">to_node</span><span class="o">=</span><span class="n">english_end_node</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;branching_to_spanish_end&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">from_node</span><span class="o">=</span><span class="n">branching_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">from_branch</span><span class="o">=</span><span class="n">languages_to_branch_name</span><span class="p">[</span><span class="s2">&quot;spanish&quot;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">to_node</span><span class="o">=</span><span class="n">spanish_end_node</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;branching_to_italian_end&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">from_node</span><span class="o">=</span><span class="n">branching_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">from_branch</span><span class="o">=</span><span class="n">languages_to_branch_name</span><span class="p">[</span><span class="s2">&quot;italian&quot;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">to_node</span><span class="o">=</span><span class="n">italian_end_node</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;branching_to_unknown_end&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">from_node</span><span class="o">=</span><span class="n">branching_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">from_branch</span><span class="o">=</span><span class="n">BranchingNode</span><span class="o">.</span><span class="n">DEFAULT_BRANCH</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">to_node</span><span class="o">=</span><span class="n">unknown_end_node</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">data_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;language_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">agent_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;language&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">branching_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;language&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<em>str</em>) – A unique identifier for this Component</p></li>
<li><p><strong>name</strong> (<em>str</em>) – The name of the branch that corresponds to the branch that gets closed by this node,
which will be exposed by the Flow</p></li>
<li><p><strong>description</strong> (<em>str</em><em> | </em><em>None</em>) – Optional description of this Component</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Optional, additional metadata related to this Component</p></li>
<li><p><strong>min_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>max_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>inputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of inputs accepted by this component</p></li>
<li><p><strong>outputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of outputs exposed by this component</p></li>
<li><p><strong>branches</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – The list of outgoing branch names that the node will expose</p></li>
<li><p><strong>branch_name</strong> (<em>str</em>) – The name of the branch that corresponds to the branch that gets closed by this node,
which will be exposed by the Flow</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.endnode.EndNode.branch_name">
<span class="sig-name descname"><span class="pre">branch_name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#pyagentspec.flows.nodes.endnode.EndNode.branch_name" title="Permalink to this definition">#</a></dt>
<dd><p>The name of the branch that corresponds to the branch that gets closed by this node,
which will be exposed by the Flow</p>
</dd></dl>

</dd></dl>

<span class="target" id="flownode"></span><dl class="py class">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.flownode.FlowNode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyagentspec.flows.nodes.flownode.</span></span><span class="sig-name descname"><span class="pre">FlowNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branches=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subflow</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyagentspec.flows.nodes.flownode.FlowNode" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyagentspec.flows.node.Node" title="pyagentspec.flows.node.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a></p>
<p>The flow node executes a subflow as part of a flow.</p>
<ul class="simple">
<li><dl class="simple">
<dt><strong>Inputs</strong></dt><dd><p>Inferred from the inner structure. It’s the sets of inputs
required by the StartNode of the inner flow.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Outputs</strong></dt><dd><p>Inferred from the inner structure. It’s the union of the
sets of outputs exposed by the EndNodes of the inner flow.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Branches</strong></dt><dd><p>Inferred from the inner flow, one per each different value of the attribute
<code class="docutils literal notranslate"><span class="pre">branch_name</span></code> of the nodes of type EndNode in the inner flow.</p>
</dd>
</dl>
</li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<em>str</em>) – A unique identifier for this Component</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of this Component</p></li>
<li><p><strong>description</strong> (<em>str</em><em> | </em><em>None</em>) – Optional description of this Component</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Optional, additional metadata related to this Component</p></li>
<li><p><strong>min_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>max_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>inputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of inputs accepted by this component</p></li>
<li><p><strong>outputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of outputs exposed by this component</p></li>
<li><p><strong>branches</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – The list of outgoing branch names that the node will expose</p></li>
<li><p><strong>subflow</strong> (<a class="reference internal" href="#pyagentspec.flows.flow.Flow" title="pyagentspec.flows.flow.Flow"><em>Flow</em></a>) – The flow that should be executed</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<p>The <code class="docutils literal notranslate"><span class="pre">FlowNode</span></code> is particularly suitable when subflows can be reused inside a project.
Let’s see an example with a flow that estimates numerical value
using the “wisdowm of the crowd” effect:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">Property</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.edges</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlFlowEdge</span><span class="p">,</span> <span class="n">DataFlowEdge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.nodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">MapNode</span><span class="p">,</span> <span class="n">LlmNode</span><span class="p">,</span> <span class="n">ToolNode</span><span class="p">,</span> <span class="n">StartNode</span><span class="p">,</span> <span class="n">EndNode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.tools</span><span class="w"> </span><span class="kn">import</span> <span class="n">ServerTool</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">duplication_tool</span> <span class="o">=</span> <span class="n">ServerTool</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;duplication_tool&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;element&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;n&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">}</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>                <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;flow_iterable_queries&quot;</span><span class="p">,</span>
<span class="gp">... </span>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="gp">... </span>                <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}</span>
<span class="gp">... </span>            <span class="p">},</span>
<span class="gp">... </span>        <span class="p">)</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reduce_tool</span> <span class="o">=</span> <span class="n">ServerTool</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;reduce_tool&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;elements&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span> <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}}</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">Property</span><span class="p">(</span><span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;flow_processed_query&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">})],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Defining a simple prompt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">REASONING_PROMPT_TEMPLATE</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;Provide your best numerical estimate for: {{user_input}}</span>
<span class="gp">... </span><span class="s1">Your answer should be a single number.</span>
<span class="gp">... </span><span class="s1">Do not include any units, reasoning, or extra text.&#39;&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Defining the subflow for the map step</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user_input_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;user_input&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow_processed_query_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;flow_processed_query&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_node</span> <span class="o">=</span> <span class="n">StartNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start&quot;</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">user_input_property</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">end_node</span> <span class="o">=</span> <span class="n">EndNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">flow_processed_query_property</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">llm_node</span> <span class="o">=</span> <span class="n">LlmNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;reasoning llm node&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">llm_config</span><span class="o">=</span><span class="n">llm_config</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">prompt_template</span><span class="o">=</span><span class="n">REASONING_PROMPT_TEMPLATE</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">user_input_property</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">flow_processed_query_property</span><span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inner_map_flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Map flow&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">nodes</span><span class="o">=</span><span class="p">[</span><span class="n">start_node</span><span class="p">,</span> <span class="n">llm_node</span><span class="p">,</span> <span class="n">end_node</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">control_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start_to_llm&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;llm_to_end&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">data_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;query_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;user_input&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;user_input&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;search_results_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;flow_processed_query&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;flow_processed_query&quot;</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user_query_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;user_query&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n_repeat_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;n_repeat&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow_iterable_queries_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>        <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;iterated_user_input&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow_processed_queries_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>        <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;collected_flow_processed_query&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_node</span> <span class="o">=</span> <span class="n">StartNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start&quot;</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">user_query_property</span><span class="p">,</span> <span class="n">n_repeat_property</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">end_node</span> <span class="o">=</span> <span class="n">EndNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">flow_processed_query_property</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">duplication_node</span> <span class="o">=</span> <span class="n">ToolNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;duplication_tool node&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">tool</span><span class="o">=</span><span class="n">duplication_tool</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reduce_node</span> <span class="o">=</span> <span class="n">ToolNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;reduce_tool node&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">tool</span><span class="o">=</span><span class="n">reduce_tool</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">map_node</span> <span class="o">=</span> <span class="n">MapNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;map node&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">subflow</span><span class="o">=</span><span class="n">inner_map_flow</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">flow_iterable_queries_property</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">flow_processed_queries_property</span><span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapreduce_flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Map-reduce flow&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">nodes</span><span class="o">=</span><span class="p">[</span><span class="n">start_node</span><span class="p">,</span> <span class="n">duplication_node</span><span class="p">,</span> <span class="n">map_node</span><span class="p">,</span> <span class="n">reduce_node</span><span class="p">,</span> <span class="n">end_node</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">control_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;start_to_duplication&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">duplication_node</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;duplication_to_map&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">duplication_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">map_node</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;map_to_reduce&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">map_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">reduce_node</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;reduce_to_end&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">reduce_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">data_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;query_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;user_query&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">duplication_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;element&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;n_repeat_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;n_repeat&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">duplication_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;n&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;flow_iterables_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">duplication_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;flow_iterable_queries&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">map_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;iterated_user_input&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;flow_processed_queries_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">map_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;collected_flow_processed_query&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">reduce_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;elements&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;flow_processed_query_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">reduce_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;flow_processed_query&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;flow_processed_query&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Once the subflow is created we can simply integrate it with the <code class="docutils literal notranslate"><span class="pre">FlowNode</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.nodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">FlowNode</span><span class="p">,</span> <span class="n">AgentNode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.agent</span><span class="w"> </span><span class="kn">import</span> <span class="n">Agent</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_node</span> <span class="o">=</span> <span class="n">StartNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">end_node</span> <span class="o">=</span> <span class="n">EndNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">flow_processed_query_property</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow_node</span> <span class="o">=</span> <span class="n">FlowNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;flow node&quot;</span><span class="p">,</span> <span class="n">subflow</span><span class="o">=</span><span class="n">mapreduce_flow</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;User interaction agent&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">llm_config</span><span class="o">=</span><span class="n">llm_config</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">system_prompt</span><span class="o">=</span><span class="p">(</span>
<span class="gp">... </span>        <span class="s2">&quot;Your task is to gather from the user the query and the number of times &quot;</span>
<span class="gp">... </span>        <span class="s2">&quot;it should be asked to an LLM. Once you have this information, submit and exit.&quot;</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span>    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">user_query_property</span><span class="p">,</span> <span class="n">n_repeat_property</span><span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">agent_node</span> <span class="o">=</span> <span class="n">AgentNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;flow node&quot;</span><span class="p">,</span> <span class="n">agent</span><span class="o">=</span><span class="n">agent</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Map flow&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">nodes</span><span class="o">=</span><span class="p">[</span><span class="n">start_node</span><span class="p">,</span> <span class="n">agent_node</span><span class="p">,</span> <span class="n">flow_node</span><span class="p">,</span> <span class="n">end_node</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">control_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start_to_agent&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">agent_node</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;agent_to_flow&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">agent_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">flow_node</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;flow_to_end&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">flow_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">data_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;query_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">agent_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;user_query&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">flow_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;user_query&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;n_rep_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">agent_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;n_repeat&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">flow_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;n_repeat&quot;</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;n_rep_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">flow_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;flow_processed_query&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;flow_processed_query&quot;</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.flownode.FlowNode.subflow">
<span class="sig-name descname"><span class="pre">subflow</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pyagentspec.flows.flow.Flow" title="pyagentspec.flows.flow.Flow"><span class="pre">Flow</span></a></em><a class="headerlink" href="#pyagentspec.flows.nodes.flownode.FlowNode.subflow" title="Permalink to this definition">#</a></dt>
<dd><p>The flow that should be executed</p>
</dd></dl>

</dd></dl>

<span class="target" id="inputmessagenode"></span><dl class="py class">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.inputmessagenode.InputMessageNode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyagentspec.flows.nodes.inputmessagenode.</span></span><span class="sig-name descname"><span class="pre">InputMessageNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branches=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyagentspec.flows.nodes.inputmessagenode.InputMessageNode" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyagentspec.flows.node.Node" title="pyagentspec.flows.node.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a></p>
<p>This node interrupts the execution of the flow in order to wait for a user input, and restarts after receiving it.
An agent message, if given, is appended to the conversation before waiting for input.
User input is appended to the conversation as a user message, and it is returned as a string property from the node.</p>
<ul class="simple">
<li><dl class="simple">
<dt><strong>Inputs</strong></dt><dd><p>One per variable in the message</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Outputs</strong></dt><dd><p>One string property that represents the content of the input user message.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Branches</strong></dt><dd><p>One, the default next.</p>
</dd>
</dl>
</li>
</ul>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.edges</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlFlowEdge</span><span class="p">,</span> <span class="n">DataFlowEdge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.nodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">StartNode</span><span class="p">,</span> <span class="n">EndNode</span><span class="p">,</span> <span class="n">InputMessageNode</span><span class="p">,</span> <span class="n">OutputMessageNode</span><span class="p">,</span> <span class="n">LlmNode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">StringProperty</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_node</span> <span class="o">=</span> <span class="n">StartNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_node</span> <span class="o">=</span> <span class="n">OutputMessageNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ask_input&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;What is the paragraph you want to rephrase?&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_node</span> <span class="o">=</span> <span class="n">InputMessageNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;user_input&quot;</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">StringProperty</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;user_input&quot;</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">llm_node</span> <span class="o">=</span> <span class="n">LlmNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;rephrase&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">llm_config</span><span class="o">=</span><span class="n">llm_config</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">prompt_template</span><span class="o">=</span><span class="s2">&quot;Rephrase {{user_input}}&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">StringProperty</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;rephrased_user_input&quot;</span><span class="p">)],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output_node</span> <span class="o">=</span> <span class="n">OutputMessageNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ask_input&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;{{rephrased_user_input}}&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">end_node</span> <span class="o">=</span> <span class="n">EndNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;end&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;rephrase_paragraph_flow&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">nodes</span><span class="o">=</span><span class="p">[</span><span class="n">start_node</span><span class="p">,</span> <span class="n">prompt_node</span><span class="p">,</span> <span class="n">input_node</span><span class="p">,</span> <span class="n">llm_node</span><span class="p">,</span> <span class="n">output_node</span><span class="p">,</span> <span class="n">end_node</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">control_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ce1&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">prompt_node</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ce2&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">prompt_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">input_node</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ce3&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">input_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ce4&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">output_node</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ce5&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">output_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">data_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;de1&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">input_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;user_input&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;user_input&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;de2&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;rephrased_user_input&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">output_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;rephrased_user_input&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>    <span class="p">]</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<em>str</em>) – A unique identifier for this Component</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of this Component</p></li>
<li><p><strong>description</strong> (<em>str</em><em> | </em><em>None</em>) – Optional description of this Component</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Optional, additional metadata related to this Component</p></li>
<li><p><strong>min_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>max_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>inputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of inputs accepted by this component</p></li>
<li><p><strong>outputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of outputs exposed by this component</p></li>
<li><p><strong>branches</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – The list of outgoing branch names that the node will expose</p></li>
<li><p><strong>message</strong> (<em>str</em><em> | </em><em>None</em>) – The agent message to append to the conversation before waiting for user input</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.inputmessagenode.InputMessageNode.DEFAULT_OUTPUT">
<span class="sig-name descname"><span class="pre">DEFAULT_OUTPUT</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'user_input'</span></em><a class="headerlink" href="#pyagentspec.flows.nodes.inputmessagenode.InputMessageNode.DEFAULT_OUTPUT" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.inputmessagenode.InputMessageNode.message">
<span class="sig-name descname"><span class="pre">message</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#pyagentspec.flows.nodes.inputmessagenode.InputMessageNode.message" title="Permalink to this definition">#</a></dt>
<dd><p>The agent message to append to the conversation before waiting for user input</p>
</dd></dl>

</dd></dl>

<span class="target" id="llmnode"></span><dl class="py class">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.llmnode.LlmNode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyagentspec.flows.nodes.llmnode.</span></span><span class="sig-name descname"><span class="pre">LlmNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branches=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">llm_config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt_template</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyagentspec.flows.nodes.llmnode.LlmNode" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyagentspec.flows.node.Node" title="pyagentspec.flows.node.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a></p>
<p>Execute a prompt template with a given LLM.</p>
<p>This node is intended to be a part of a Flow.</p>
<ul class="simple">
<li><dl class="simple">
<dt><strong>Inputs</strong></dt><dd><p>One per placeholder in the prompt template.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Outputs</strong></dt><dd><p>The output text generated by the LLM.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Branches</strong></dt><dd><p>One, the default next.</p>
</dd>
</dl>
</li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<em>str</em>) – A unique identifier for this Component</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of this Component</p></li>
<li><p><strong>description</strong> (<em>str</em><em> | </em><em>None</em>) – Optional description of this Component</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Optional, additional metadata related to this Component</p></li>
<li><p><strong>min_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>max_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>inputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of inputs accepted by this component</p></li>
<li><p><strong>outputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of outputs exposed by this component</p></li>
<li><p><strong>branches</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – The list of outgoing branch names that the node will expose</p></li>
<li><p><strong>llm_config</strong> (<a class="reference internal" href="llmmodels.html#pyagentspec.llms.llmconfig.LlmConfig" title="pyagentspec.llms.llmconfig.LlmConfig"><em>LlmConfig</em></a>) – The LLM to use for generation in this node.</p></li>
<li><p><strong>prompt_template</strong> (<em>str</em>) – Defines the prompt sent to the model. Allows placeholders, which can define inputs.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">Property</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.edges</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlFlowEdge</span><span class="p">,</span> <span class="n">DataFlowEdge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.nodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">LlmNode</span><span class="p">,</span> <span class="n">StartNode</span><span class="p">,</span> <span class="n">EndNode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">country_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;country&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">capital_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;capital&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_node</span> <span class="o">=</span> <span class="n">StartNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start&quot;</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">country_property</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">end_node</span> <span class="o">=</span> <span class="n">EndNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">capital_property</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">llm_node</span> <span class="o">=</span> <span class="n">LlmNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;simple llm node&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">llm_config</span><span class="o">=</span><span class="n">llm_config</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">prompt_template</span><span class="o">=</span><span class="s2">&quot;What is the capital of {{ country }}?&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">country_property</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">capital_property</span><span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Get the country&#39;s capital flow&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">nodes</span><span class="o">=</span><span class="p">[</span><span class="n">start_node</span><span class="p">,</span> <span class="n">llm_node</span><span class="p">,</span> <span class="n">end_node</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">control_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start_to_llm&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;llm_to_end&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">data_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;country_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;country&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;country&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;capital_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;capital&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;capital&quot;</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.llmnode.LlmNode.DEFAULT_OUTPUT">
<span class="sig-name descname"><span class="pre">DEFAULT_OUTPUT</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'generated_text'</span></em><a class="headerlink" href="#pyagentspec.flows.nodes.llmnode.LlmNode.DEFAULT_OUTPUT" title="Permalink to this definition">#</a></dt>
<dd><p>Raw text generated by the LLM.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.llmnode.LlmNode.llm_config">
<span class="sig-name descname"><span class="pre">llm_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="llmmodels.html#pyagentspec.llms.llmconfig.LlmConfig" title="pyagentspec.llms.llmconfig.LlmConfig"><span class="pre">LlmConfig</span></a></em><a class="headerlink" href="#pyagentspec.flows.nodes.llmnode.LlmNode.llm_config" title="Permalink to this definition">#</a></dt>
<dd><p>The LLM to use for generation in this node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.llmnode.LlmNode.prompt_template">
<span class="sig-name descname"><span class="pre">prompt_template</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#pyagentspec.flows.nodes.llmnode.LlmNode.prompt_template" title="Permalink to this definition">#</a></dt>
<dd><p>Defines the prompt sent to the model. Allows placeholders, which can define inputs.</p>
</dd></dl>

</dd></dl>

<span class="target" id="mapnode"></span><dl class="py class">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.mapnode.MapNode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyagentspec.flows.nodes.mapnode.</span></span><span class="sig-name descname"><span class="pre">MapNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branches=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subflow</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reducers=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyagentspec.flows.nodes.mapnode.MapNode" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyagentspec.flows.node.Node" title="pyagentspec.flows.node.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a></p>
<p>The map node executes a subflow on each element of a given input as part of a flow.</p>
<ul class="simple">
<li><dl class="simple">
<dt><strong>Inputs</strong></dt><dd><p>Inferred from the inner structure. It’s the sets of inputs
required by the StartNode of the inner flow.
The names of the inputs will be the ones of the inner flow,
complemented with the <code class="docutils literal notranslate"><span class="pre">iterated_</span></code> prefix. Their type is
<code class="docutils literal notranslate"><span class="pre">Union[inner_type,</span> <span class="pre">List[inner_type]]</span></code>, where <code class="docutils literal notranslate"><span class="pre">inner_type</span></code>
is the type of the respective input in the inner flow.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Outputs</strong></dt><dd><p>Inferred from the inner structure. It’s the union of the
sets of outputs exposed by the EndNodes of the inner flow,
combined with the reducer method of each output.
The names of the outputs will be the ones of the inner flow,
complemented with the <code class="docutils literal notranslate"><span class="pre">collected_</span></code> prefix. Their type depends
on the <code class="docutils literal notranslate"><span class="pre">reduce</span></code> method specified for that output:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">List</span></code> of the respective output type in case of <code class="docutils literal notranslate"><span class="pre">append</span></code></p></li>
<li><p>same type of the respective output type in case of <code class="docutils literal notranslate"><span class="pre">sum</span></code>, <code class="docutils literal notranslate"><span class="pre">avg</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Branches</strong></dt><dd><p>One, the default next.</p>
</dd>
</dl>
</li>
</ul>
<p class="rubric">Examples</p>
<p>In this example we will create a flow that returns
an L2-normalized version of a given list of numbers.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">Property</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.edges</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlFlowEdge</span><span class="p">,</span> <span class="n">DataFlowEdge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.nodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">EndNode</span><span class="p">,</span> <span class="n">StartNode</span><span class="p">,</span> <span class="n">MapNode</span><span class="p">,</span> <span class="n">ToolNode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.tools</span><span class="w"> </span><span class="kn">import</span> <span class="n">ServerTool</span>
</pre></div>
</div>
<p>First, we define a MapNode that returns the square of all the elements in a list.
It will be used to compute the L2-norm.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span><span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x_square_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;x_square&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">square_tool</span> <span class="o">=</span> <span class="n">ServerTool</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;compute_square_tool&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Computes the square of a number&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">x_property</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">x_square_property</span><span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">list_of_x_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;x_list&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span> <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">}}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_node</span> <span class="o">=</span> <span class="n">StartNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start&quot;</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">x_property</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">end_node</span> <span class="o">=</span> <span class="n">EndNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">x_square_property</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">square_tool_node</span> <span class="o">=</span> <span class="n">ToolNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;square tool node&quot;</span><span class="p">,</span> <span class="n">tool</span><span class="o">=</span><span class="n">square_tool</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">square_number_flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Square number flow&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">nodes</span><span class="o">=</span><span class="p">[</span><span class="n">start_node</span><span class="p">,</span> <span class="n">square_tool_node</span><span class="p">,</span> <span class="n">end_node</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">control_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;start_to_tool&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">square_tool_node</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;tool_to_end&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">square_tool_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">end_node</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">data_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;x_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">square_tool_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;x_square_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">square_tool_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;x_square&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;x_square&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">list_of_x_square_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;x_square_list&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span> <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">}}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">square_numbers_map_node</span> <span class="o">=</span> <span class="n">MapNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;square number map node&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">subflow</span><span class="o">=</span><span class="n">square_number_flow</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Now we define the MapNode responsible for normalizing the given list of input numbers.
The denominator is the same for all of the numbers,
we are going to map only the numerators (i.e., the input numbers).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">numerator_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;numerator&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">denominator_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;denominator&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;result&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">division_tool</span> <span class="o">=</span> <span class="n">ServerTool</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;division_tool&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Computes the ratio between two numbers&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">numerator_property</span><span class="p">,</span> <span class="n">denominator_property</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">result_property</span><span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_node</span> <span class="o">=</span> <span class="n">StartNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start&quot;</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">numerator_property</span><span class="p">,</span> <span class="n">denominator_property</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">end_node</span> <span class="o">=</span> <span class="n">EndNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">result_property</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">divide_node</span> <span class="o">=</span> <span class="n">ToolNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;divide node&quot;</span><span class="p">,</span> <span class="n">tool</span><span class="o">=</span><span class="n">division_tool</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">normalize_flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Normalize flow&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">nodes</span><span class="o">=</span><span class="p">[</span><span class="n">start_node</span><span class="p">,</span> <span class="n">divide_node</span><span class="p">,</span> <span class="n">end_node</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">control_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start_to_tool&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">divide_node</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;tool_to_end&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">divide_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">data_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;numerator_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;numerator&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">divide_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;numerator&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;denominator_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;denominator&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">divide_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;denominator&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;result_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">divide_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;result&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;result&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Finally, we define the overall flow:</p>
<ul class="simple">
<li><p>The list of inputs is squared</p></li>
<li><p>The squared list is summed and root squared</p></li>
<li><p>The list of inputs is normalized based on the outcomes of the previous 2 steps</p></li>
</ul>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">squared_sum_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;squared_sum&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">normalized_list_of_x_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>        <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;x_list_normalized&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">normalize_map_node</span> <span class="o">=</span> <span class="n">MapNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;normalize map node&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">subflow</span><span class="o">=</span><span class="n">normalize_flow</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">squared_sum_tool</span> <span class="o">=</span> <span class="n">ServerTool</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;squared_sum_tool&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Computes the squared sum of a list of numbers&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">list_of_x_property</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">squared_sum_property</span><span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_node</span> <span class="o">=</span> <span class="n">StartNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start&quot;</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">list_of_x_property</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">end_node</span> <span class="o">=</span> <span class="n">EndNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">normalized_list_of_x_property</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">squared_sum_tool_node</span> <span class="o">=</span> <span class="n">ToolNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;squared sum tool node&quot;</span><span class="p">,</span> <span class="n">tool</span><span class="o">=</span><span class="n">squared_sum_tool</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;L2 normalize flow&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">nodes</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">square_numbers_map_node</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">squared_sum_tool_node</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">normalize_map_node</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">end_node</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">control_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;start_to_square_numbers&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">from_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">to_node</span><span class="o">=</span><span class="n">square_numbers_map_node</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;square_numbers_to_squared_sum_tool&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">from_node</span><span class="o">=</span><span class="n">square_numbers_map_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">to_node</span><span class="o">=</span><span class="n">squared_sum_tool_node</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;squared_sum_tool_to_normalize&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">from_node</span><span class="o">=</span><span class="n">squared_sum_tool_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">to_node</span><span class="o">=</span><span class="n">normalize_map_node</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;normalize_to_end&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">from_node</span><span class="o">=</span><span class="n">normalize_map_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">to_node</span><span class="o">=</span><span class="n">end_node</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">data_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;list_of_x_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;x_list&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">square_numbers_map_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;iterated_x&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;x_square_list_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">square_numbers_map_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;collected_x_square&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">squared_sum_tool_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;x_list&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;numerator_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;x_list&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">normalize_map_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;iterated_numerator&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;denominator_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">squared_sum_tool_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;squared_sum&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">normalize_map_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;iterated_denominator&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;x_list_normalized_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">normalize_map_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;collected_result&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;x_list_normalized&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<em>str</em>) – A unique identifier for this Component</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of this Component</p></li>
<li><p><strong>description</strong> (<em>str</em><em> | </em><em>None</em>) – Optional description of this Component</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Optional, additional metadata related to this Component</p></li>
<li><p><strong>min_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>max_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>inputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of inputs accepted by this component</p></li>
<li><p><strong>outputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of outputs exposed by this component</p></li>
<li><p><strong>branches</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – The list of outgoing branch names that the node will expose</p></li>
<li><p><strong>subflow</strong> (<a class="reference internal" href="#pyagentspec.flows.flow.Flow" title="pyagentspec.flows.flow.Flow"><em>Flow</em></a>) – The flow that should be applied to all the input values</p></li>
<li><p><strong>reducers</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>ReductionMethod</em><em>] </em><em>| </em><em>None</em>) – The way the outputs of the different executions (map) should be collected together (reduce).
It’s a dictionary mapping the name of an output to the respective reduction method
(e.g., append, sum, avg, …, allowed methods depend on the type of the output)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.mapnode.MapNode.reducers">
<span class="sig-name descname"><span class="pre">reducers</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ReductionMethod</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#pyagentspec.flows.nodes.mapnode.MapNode.reducers" title="Permalink to this definition">#</a></dt>
<dd><p>The way the outputs of the different executions (map) should be collected together (reduce).
It’s a dictionary mapping the name of an output to the respective reduction method
(e.g., append, sum, avg, …, allowed methods depend on the type of the output)</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.mapnode.MapNode.subflow">
<span class="sig-name descname"><span class="pre">subflow</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pyagentspec.flows.flow.Flow" title="pyagentspec.flows.flow.Flow"><span class="pre">Flow</span></a></em><a class="headerlink" href="#pyagentspec.flows.nodes.mapnode.MapNode.subflow" title="Permalink to this definition">#</a></dt>
<dd><p>The flow that should be applied to all the input values</p>
</dd></dl>

</dd></dl>

<span class="target" id="outputmessagenode"></span><dl class="py class">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.outputmessagenode.OutputMessageNode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyagentspec.flows.nodes.outputmessagenode.</span></span><span class="sig-name descname"><span class="pre">OutputMessageNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branches=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyagentspec.flows.nodes.outputmessagenode.OutputMessageNode" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyagentspec.flows.node.Node" title="pyagentspec.flows.node.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a></p>
<p>This node appends an agent message to the ongoing flow conversation.</p>
<ul class="simple">
<li><dl class="simple">
<dt><strong>Inputs</strong></dt><dd><p>One per variable in the message.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Outputs</strong></dt><dd><p>No outputs.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Branches</strong></dt><dd><p>One, the default next.</p>
</dd>
</dl>
</li>
</ul>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.edges</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlFlowEdge</span><span class="p">,</span> <span class="n">DataFlowEdge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.nodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">StartNode</span><span class="p">,</span> <span class="n">EndNode</span><span class="p">,</span> <span class="n">InputMessageNode</span><span class="p">,</span> <span class="n">OutputMessageNode</span><span class="p">,</span> <span class="n">LlmNode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">StringProperty</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_node</span> <span class="o">=</span> <span class="n">StartNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_node</span> <span class="o">=</span> <span class="n">OutputMessageNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ask_input&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;What is the paragraph you want to rephrase?&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_node</span> <span class="o">=</span> <span class="n">InputMessageNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;user_input&quot;</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">StringProperty</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;user_input&quot;</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">llm_node</span> <span class="o">=</span> <span class="n">LlmNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;rephrase&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">llm_config</span><span class="o">=</span><span class="n">llm_config</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">prompt_template</span><span class="o">=</span><span class="s2">&quot;Rephrase {{user_input}}&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">StringProperty</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;rephrased_user_input&quot;</span><span class="p">)],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output_node</span> <span class="o">=</span> <span class="n">OutputMessageNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ask_input&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;{{rephrased_user_input}}&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">end_node</span> <span class="o">=</span> <span class="n">EndNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;end&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;rephrase_paragraph_flow&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">nodes</span><span class="o">=</span><span class="p">[</span><span class="n">start_node</span><span class="p">,</span> <span class="n">prompt_node</span><span class="p">,</span> <span class="n">input_node</span><span class="p">,</span> <span class="n">llm_node</span><span class="p">,</span> <span class="n">output_node</span><span class="p">,</span> <span class="n">end_node</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">control_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ce1&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">prompt_node</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ce2&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">prompt_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">input_node</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ce3&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">input_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ce4&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">output_node</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ce5&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">output_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">data_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;de1&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">input_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;user_input&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;user_input&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;de2&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;rephrased_user_input&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">output_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;rephrased_user_input&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>    <span class="p">]</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<em>str</em>) – A unique identifier for this Component</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of this Component</p></li>
<li><p><strong>description</strong> (<em>str</em><em> | </em><em>None</em>) – Optional description of this Component</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Optional, additional metadata related to this Component</p></li>
<li><p><strong>min_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>max_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>inputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of inputs accepted by this component</p></li>
<li><p><strong>outputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of outputs exposed by this component</p></li>
<li><p><strong>branches</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – The list of outgoing branch names that the node will expose</p></li>
<li><p><strong>message</strong> (<em>str</em>) – Content of the agent message to append. Allows placeholders, which can define inputs.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.outputmessagenode.OutputMessageNode.message">
<span class="sig-name descname"><span class="pre">message</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#pyagentspec.flows.nodes.outputmessagenode.OutputMessageNode.message" title="Permalink to this definition">#</a></dt>
<dd><p>Content of the agent message to append. Allows placeholders, which can define inputs.</p>
</dd></dl>

</dd></dl>

<span class="target" id="startnode"></span><dl class="py class">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.startnode.StartNode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyagentspec.flows.nodes.startnode.</span></span><span class="sig-name descname"><span class="pre">StartNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branches=&lt;factory&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyagentspec.flows.nodes.startnode.StartNode" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyagentspec.flows.node.Node" title="pyagentspec.flows.node.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a></p>
<p>Start nodes denote the start of the execution of a flow.</p>
<ul class="simple">
<li><dl class="simple">
<dt><strong>Inputs</strong></dt><dd><p>The list of inputs that should be the inputs of the flow. If both input and output
properties are specified they must be an exact match</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Outputs</strong></dt><dd><p>The list of outputs of the step. If both input and output properties are specified they
must be an exact match</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Branches</strong></dt><dd><p>One, the default next.</p>
</dd>
</dl>
</li>
</ul>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">Property</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.edges</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlFlowEdge</span><span class="p">,</span> <span class="n">DataFlowEdge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.nodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">EndNode</span><span class="p">,</span> <span class="n">LlmNode</span><span class="p">,</span> <span class="n">StartNode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user_question_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;user_question&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The user question.&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">answer_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span><span class="n">json_schema</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;answer&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_node</span> <span class="o">=</span> <span class="n">StartNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start&quot;</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">user_question_property</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">end_node</span> <span class="o">=</span> <span class="n">EndNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">answer_property</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">llm_node</span> <span class="o">=</span> <span class="n">LlmNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;llm node&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">prompt_template</span><span class="o">=</span><span class="s2">&quot;Answer the user question: {{user_question}}&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">llm_config</span><span class="o">=</span><span class="n">llm_config</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;flow&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">nodes</span><span class="o">=</span><span class="p">[</span><span class="n">start_node</span><span class="p">,</span> <span class="n">llm_node</span><span class="p">,</span> <span class="n">end_node</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">control_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start_to_llm&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;llm_to_end&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">data_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;query_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;user_question&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;user_question&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;answer_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">llm_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;generated_text&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;answer&quot;</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<em>str</em>) – A unique identifier for this Component</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of this Component</p></li>
<li><p><strong>description</strong> (<em>str</em><em> | </em><em>None</em>) – Optional description of this Component</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Optional, additional metadata related to this Component</p></li>
<li><p><strong>min_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>max_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>inputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of inputs accepted by this component</p></li>
<li><p><strong>outputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of outputs exposed by this component</p></li>
<li><p><strong>branches</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – The list of outgoing branch names that the node will expose</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<span class="target" id="toolnode"></span><dl class="py class">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.toolnode.ToolNode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyagentspec.flows.nodes.toolnode.</span></span><span class="sig-name descname"><span class="pre">ToolNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_agentspec_version=AgentSpecVersionEnum.v25_4_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branches=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tool</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyagentspec.flows.nodes.toolnode.ToolNode" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyagentspec.flows.node.Node" title="pyagentspec.flows.node.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a></p>
<p>The tool execution node is a node that will execute a tool as part of a flow.</p>
<ul class="simple">
<li><dl class="simple">
<dt><strong>Inputs</strong></dt><dd><p>Inferred from the definition of the tool to execute.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Outputs</strong></dt><dd><p>Inferred from the definition of the tool to execute.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Branches</strong></dt><dd><p>One, the default next.</p>
</dd>
</dl>
</li>
</ul>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.edges</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlFlowEdge</span><span class="p">,</span> <span class="n">DataFlowEdge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.flows.nodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">ToolNode</span><span class="p">,</span> <span class="n">StartNode</span><span class="p">,</span> <span class="n">EndNode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.tools</span><span class="w"> </span><span class="kn">import</span> <span class="n">ServerTool</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyagentspec.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">Property</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span><span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x_square_root_property</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">json_schema</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;x_square_root&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">square_root_tool</span> <span class="o">=</span> <span class="n">ServerTool</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;compute_square_root&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Computes the square root of a number&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">x_property</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">x_square_root_property</span><span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_node</span> <span class="o">=</span> <span class="n">StartNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start&quot;</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">x_property</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">end_node</span> <span class="o">=</span> <span class="n">EndNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">x_square_root_property</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tool_node</span> <span class="o">=</span> <span class="n">ToolNode</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">tool</span><span class="o">=</span><span class="n">square_root_tool</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Compute square root flow&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">nodes</span><span class="o">=</span><span class="p">[</span><span class="n">start_node</span><span class="p">,</span> <span class="n">tool_node</span><span class="p">,</span> <span class="n">end_node</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">control_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start_to_tool&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">tool_node</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;tool_to_end&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="o">=</span><span class="n">tool_node</span><span class="p">,</span> <span class="n">to_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">data_flow_connections</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;x_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">start_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">tool_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;x_square_root_edge&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_node</span><span class="o">=</span><span class="n">tool_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_output</span><span class="o">=</span><span class="s2">&quot;x_square_root&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_node</span><span class="o">=</span><span class="n">end_node</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_input</span><span class="o">=</span><span class="s2">&quot;x_square_root&quot;</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<em>str</em>) – A unique identifier for this Component</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of this Component</p></li>
<li><p><strong>description</strong> (<em>str</em><em> | </em><em>None</em>) – Optional description of this Component</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Optional, additional metadata related to this Component</p></li>
<li><p><strong>min_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>max_agentspec_version</strong> (<em>AgentSpecVersionEnum</em>) – </p></li>
<li><p><strong>inputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of inputs accepted by this component</p></li>
<li><p><strong>outputs</strong> (<em>List</em><em>[</em><a class="reference internal" href="ioproperties.html#pyagentspec.property.Property" title="pyagentspec.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of outputs exposed by this component</p></li>
<li><p><strong>branches</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – The list of outgoing branch names that the node will expose</p></li>
<li><p><strong>tool</strong> (<a class="reference internal" href="tools.html#pyagentspec.tools.tool.Tool" title="pyagentspec.tools.tool.Tool"><em>Tool</em></a>) – The tool to be executed in this Node</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyagentspec.flows.nodes.toolnode.ToolNode.tool">
<span class="sig-name descname"><span class="pre">tool</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="tools.html#pyagentspec.tools.tool.Tool" title="pyagentspec.tools.tool.Tool"><span class="pre">Tool</span></a></em><a class="headerlink" href="#pyagentspec.flows.nodes.toolnode.ToolNode.tool" title="Permalink to this definition">#</a></dt>
<dd><p>The tool to be executed in this Node</p>
</dd></dl>

</dd></dl>

</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#flows-nodes">Flows &amp; Nodes</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.flow.Flow"><code class="docutils literal notranslate"><span class="pre">Flow</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.node.Node"><code class="docutils literal notranslate"><span class="pre">Node</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.node.Node.DEFAULT_NEXT_BRANCH"><code class="docutils literal notranslate"><span class="pre">Node.DEFAULT_NEXT_BRANCH</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.node.Node.branches"><code class="docutils literal notranslate"><span class="pre">Node.branches</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.edges.dataflowedge.DataFlowEdge"><code class="docutils literal notranslate"><span class="pre">DataFlowEdge</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.edges.dataflowedge.DataFlowEdge.destination_input"><code class="docutils literal notranslate"><span class="pre">DataFlowEdge.destination_input</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.edges.dataflowedge.DataFlowEdge.destination_node"><code class="docutils literal notranslate"><span class="pre">DataFlowEdge.destination_node</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.edges.dataflowedge.DataFlowEdge.source_node"><code class="docutils literal notranslate"><span class="pre">DataFlowEdge.source_node</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.edges.dataflowedge.DataFlowEdge.source_output"><code class="docutils literal notranslate"><span class="pre">DataFlowEdge.source_output</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.edges.controlflowedge.ControlFlowEdge"><code class="docutils literal notranslate"><span class="pre">ControlFlowEdge</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.edges.controlflowedge.ControlFlowEdge.from_branch"><code class="docutils literal notranslate"><span class="pre">ControlFlowEdge.from_branch</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.edges.controlflowedge.ControlFlowEdge.from_node"><code class="docutils literal notranslate"><span class="pre">ControlFlowEdge.from_node</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.edges.controlflowedge.ControlFlowEdge.to_node"><code class="docutils literal notranslate"><span class="pre">ControlFlowEdge.to_node</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#nodes">Nodes</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.agentnode.AgentNode"><code class="docutils literal notranslate"><span class="pre">AgentNode</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.agentnode.AgentNode.agent"><code class="docutils literal notranslate"><span class="pre">AgentNode.agent</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.apinode.ApiNode"><code class="docutils literal notranslate"><span class="pre">ApiNode</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.apinode.ApiNode.DEFAULT_OUTPUT"><code class="docutils literal notranslate"><span class="pre">ApiNode.DEFAULT_OUTPUT</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.apinode.ApiNode.api_spec_uri"><code class="docutils literal notranslate"><span class="pre">ApiNode.api_spec_uri</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.apinode.ApiNode.data"><code class="docutils literal notranslate"><span class="pre">ApiNode.data</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.apinode.ApiNode.headers"><code class="docutils literal notranslate"><span class="pre">ApiNode.headers</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.apinode.ApiNode.http_method"><code class="docutils literal notranslate"><span class="pre">ApiNode.http_method</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.apinode.ApiNode.query_params"><code class="docutils literal notranslate"><span class="pre">ApiNode.query_params</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.apinode.ApiNode.url"><code class="docutils literal notranslate"><span class="pre">ApiNode.url</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.branchingnode.BranchingNode"><code class="docutils literal notranslate"><span class="pre">BranchingNode</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.branchingnode.BranchingNode.DEFAULT_BRANCH"><code class="docutils literal notranslate"><span class="pre">BranchingNode.DEFAULT_BRANCH</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.branchingnode.BranchingNode.DEFAULT_INPUT"><code class="docutils literal notranslate"><span class="pre">BranchingNode.DEFAULT_INPUT</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.branchingnode.BranchingNode.mapping"><code class="docutils literal notranslate"><span class="pre">BranchingNode.mapping</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.endnode.EndNode"><code class="docutils literal notranslate"><span class="pre">EndNode</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.endnode.EndNode.branch_name"><code class="docutils literal notranslate"><span class="pre">EndNode.branch_name</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.flownode.FlowNode"><code class="docutils literal notranslate"><span class="pre">FlowNode</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.flownode.FlowNode.subflow"><code class="docutils literal notranslate"><span class="pre">FlowNode.subflow</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.inputmessagenode.InputMessageNode"><code class="docutils literal notranslate"><span class="pre">InputMessageNode</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.inputmessagenode.InputMessageNode.DEFAULT_OUTPUT"><code class="docutils literal notranslate"><span class="pre">InputMessageNode.DEFAULT_OUTPUT</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.inputmessagenode.InputMessageNode.message"><code class="docutils literal notranslate"><span class="pre">InputMessageNode.message</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.llmnode.LlmNode"><code class="docutils literal notranslate"><span class="pre">LlmNode</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.llmnode.LlmNode.DEFAULT_OUTPUT"><code class="docutils literal notranslate"><span class="pre">LlmNode.DEFAULT_OUTPUT</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.llmnode.LlmNode.llm_config"><code class="docutils literal notranslate"><span class="pre">LlmNode.llm_config</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.llmnode.LlmNode.prompt_template"><code class="docutils literal notranslate"><span class="pre">LlmNode.prompt_template</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.mapnode.MapNode"><code class="docutils literal notranslate"><span class="pre">MapNode</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.mapnode.MapNode.reducers"><code class="docutils literal notranslate"><span class="pre">MapNode.reducers</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.mapnode.MapNode.subflow"><code class="docutils literal notranslate"><span class="pre">MapNode.subflow</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.outputmessagenode.OutputMessageNode"><code class="docutils literal notranslate"><span class="pre">OutputMessageNode</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.outputmessagenode.OutputMessageNode.message"><code class="docutils literal notranslate"><span class="pre">OutputMessageNode.message</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.startnode.StartNode"><code class="docutils literal notranslate"><span class="pre">StartNode</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.toolnode.ToolNode"><code class="docutils literal notranslate"><span class="pre">ToolNode</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pyagentspec.flows.nodes.toolnode.ToolNode.tool"><code class="docutils literal notranslate"><span class="pre">ToolNode.tool</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=dba54f56160742ef5599"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=dba54f56160742ef5599"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, Oracle and/or its affiliates..
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 6.1.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>